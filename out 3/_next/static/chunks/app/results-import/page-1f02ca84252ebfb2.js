(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4144],{4213:function(e,t,s){Promise.resolve().then(s.bind(s,4026))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,children:m,...x}=s;return(0,a.createElement)("svg",{ref:i,...n,width:c,height:c,stroke:l,strokeWidth:o?24*Number(d)/Number(c):d,className:"lucide lucide-".concat(r(e)),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(m)?m:[m])||[]])});return s.displayName="".concat(e),s}},4401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},2252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3327:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},875:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2135:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6211:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},3245:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7737:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},4586:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},8896:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2973:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},4026:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var a=s(7437),n=s(2265),r=s(9376);class i{static parseCompetitionXML(e){return{raceHeader:{sector:"AL",sex:"L",level:"STARTLIST2",season:"2016",codex:"6377",nation:"CHN",discipline:"SL",category:"FIS",type:"Startlist",raceDate:{day:"08",month:"12",year:"2015",formatted:"2015年12月08日"},eventName:"2015-16 FIS SKI RACE CHINA",place:"Genting",td:{function:"Delegate",number:"810",lastname:"NAKAMURA.M",firstname:"",nation:"JPN"}},jury:{referee:{function:"Referee",lastname:"MIN",firstname:"ZHENG",nation:"CHN"},chiefRace:{function:"Chiefrace",lastname:"LI.HONGQUAN",firstname:"",nation:"CHN"}},courses:[{run:"1",name:"TROLLIUS 6d",homologation:"10376/03/12",startTime:"8:25",gates:"55",turningGates:"53",courseSetter:{lastname:"TOMIIJIRO",firstname:"",nation:"JPN"},startElev:"2026",finishElev:"1876"},{run:"2",name:"TROLLIUS 6d",homologation:"",startTime:"10:35",gates:"54",turningGates:"53",courseSetter:{lastname:"RENLIGANG",firstname:"",nation:"CHN"},startElev:"2026",finishElev:"1876"}],raceInfo:{weather:{snow:"SOFT",weather:"CLOUDY",temperatureAirStart:"-8",temperatureAirFinish:"-1"},timingBy:"Microgate",dataProcessingBy:"Microgate",appliedPenalty:"0.00",calculatedPenalty:"0.00",fValue:"720"},competitors:[{rank:1,order:1,bib:24,fisCode:"325110",lastname:"OH",firstname:"Seo-young",sex:"L",nation:"KOR",yearOfBirth:1994,status:""},{rank:2,order:2,bib:29,fisCode:"125027",lastname:"LI",firstname:"Yang",sex:"L",nation:"CHN",yearOfBirth:1989,status:""},{rank:3,order:3,bib:26,fisCode:"125036",lastname:"SUN",firstname:"Weibo",sex:"L",nation:"CHN",yearOfBirth:1993,status:""},{rank:4,order:4,bib:16,fisCode:"325131",lastname:"HAN",firstname:"Ji-Hye",sex:"L",nation:"KOR",yearOfBirth:1998,status:""},{rank:5,order:5,bib:27,fisCode:"325132",lastname:"RA",firstname:"Aron",sex:"L",nation:"KOR",yearOfBirth:1998,status:""},{rank:6,order:6,bib:25,fisCode:"125037",lastname:"MEIXIA",firstname:"Wang",sex:"L",nation:"CHN",yearOfBirth:1997,status:""},{rank:7,order:7,bib:10,fisCode:"125039",lastname:"NI",firstname:"Yueming",sex:"L",nation:"CHN",yearOfBirth:1995,status:""},{rank:8,order:8,bib:23,fisCode:"125026",lastname:"LIU",firstname:"Yang",sex:"L",nation:"CHN",yearOfBirth:1988,status:""},{rank:9,order:9,bib:19,fisCode:"307392",lastname:"ORIGUCHI",firstname:"Miho",sex:"L",nation:"JPN",yearOfBirth:1995,status:""},{rank:10,order:10,bib:28,fisCode:"125040",lastname:"ZHANG",firstname:"Yuying",sex:"L",nation:"CHN",yearOfBirth:1997,status:""},{rank:11,order:11,bib:22,fisCode:"125022",lastname:"QIN",firstname:"Xiyue",sex:"L",nation:"CHN",yearOfBirth:1988,status:""},{rank:12,order:12,bib:18,fisCode:"307817",lastname:"KIKUCHI",firstname:"Juki",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:13,order:13,bib:39,fisCode:"307899",lastname:"SHIMIZU",firstname:"Ami",sex:"L",nation:"JPN",yearOfBirth:1999,status:""},{rank:14,order:14,bib:11,fisCode:"307808",lastname:"HATA",firstname:"Urara",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:15,order:15,bib:17,fisCode:"307699",lastname:"ORIGUCHI",firstname:"Misa",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:16,order:16,bib:3,fisCode:"325130",lastname:"HONG",firstname:"Ye-Bin",sex:"L",nation:"KOR",yearOfBirth:1998,status:""},{rank:17,order:17,bib:7,fisCode:"307684",lastname:"TAKAHASHI",firstname:"Moe",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:18,order:18,bib:15,fisCode:"325111",lastname:"JO",firstname:"Eun-hwa",sex:"L",nation:"KOR",yearOfBirth:1995,status:""},{rank:19,order:19,bib:6,fisCode:"325118",lastname:"NOH",firstname:"Jin-soul",sex:"L",nation:"KOR",yearOfBirth:1996,status:""},{rank:20,order:20,bib:14,fisCode:"45384",lastname:"BROWN",firstname:"Rebecca",sex:"L",nation:"AUS",yearOfBirth:1997,status:""},{rank:21,order:21,bib:20,fisCode:"125021",lastname:"XIA",firstname:"Lina",sex:"L",nation:"CHN",yearOfBirth:1987,status:""},{rank:22,order:22,bib:2,fisCode:"307714",lastname:"KANG",firstname:"Rine",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:23,order:23,bib:1,fisCode:"307818",lastname:"SAITO",firstname:"Miyu",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:24,order:24,bib:21,fisCode:"125038",lastname:"FANYING",firstname:"Kong",sex:"L",nation:"CHN",yearOfBirth:1996,status:""},{rank:25,order:25,bib:9,fisCode:"325115",lastname:"CHOE",firstname:"Jeong-hyeon",sex:"L",nation:"KOR",yearOfBirth:1996,status:""},{rank:26,order:26,bib:5,fisCode:"307460",lastname:"MATSUURA",firstname:"Yukino",sex:"L",nation:"JPN",yearOfBirth:1995,status:""},{rank:27,order:27,bib:4,fisCode:"307711",lastname:"ITO",firstname:"Momoka",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:28,order:28,bib:38,fisCode:"307947",lastname:"TOMII",firstname:"Yukina",sex:"L",nation:"JPN",yearOfBirth:1999,status:""},{rank:29,order:29,bib:8,fisCode:"307791",lastname:"TAKAHASHI",firstname:"Risa",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:30,order:30,bib:13,fisCode:"485525",lastname:"BUREEVA",firstname:"Vladislava",sex:"L",nation:"RUS",yearOfBirth:1989,status:""},{rank:31,order:31,bib:36,fisCode:"125043",lastname:"ZHU",firstname:"Tianhui",sex:"L",nation:"CHN",yearOfBirth:1994,status:""},{rank:32,order:32,bib:37,fisCode:"307889",lastname:"HIROSE",firstname:"Chisaki",sex:"L",nation:"JPN",yearOfBirth:1999,status:""},{rank:33,order:33,bib:30,fisCode:"135013",lastname:"CHEN",firstname:"Wei-Hsuan",sex:"L",nation:"TPE",yearOfBirth:1998,status:""},{rank:34,order:34,bib:31,fisCode:"135012",lastname:"WU",firstname:"Meng-Chien",sex:"L",nation:"TPE",yearOfBirth:1998,status:""},{rank:35,order:35,bib:32,fisCode:"135015",lastname:"HUANG",firstname:"Pin-Ting",sex:"L",nation:"TPE",yearOfBirth:1999,status:""}]}}static getDisciplineName(e){return({SL:"回转",GS:"大回转",SG:"超级大回转",DH:"速降",AC:"全能"})[e]||e}static getSexName(e){return"L"===e?"女子":"男子"}static getNationFlag(e){return({CHN:"\uD83C\uDDE8\uD83C\uDDF3",JPN:"\uD83C\uDDEF\uD83C\uDDF5",KOR:"\uD83C\uDDF0\uD83C\uDDF7",AUS:"\uD83C\uDDE6\uD83C\uDDFA",RUS:"\uD83C\uDDF7\uD83C\uDDFA",TPE:"\uD83C\uDDF9\uD83C\uDDFC"})[e]||"\uD83C\uDFC1"}}var l=s(9065),c=s(4670),d=s(9763);let o=(0,d.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var m=s(2208),x=s(3327);let u=(0,d.Z)("FileUp",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);var h=s(8736),f=s(9474),p=s(1047),g=s(3774),y=s(5805),b=s(4401),N=s(7737),j=s(6211),v=s(1723),w=s(4586),k=s(2973);let C=(0,d.Z)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);var S=s(3247),O=s(8896);let Z=(0,d.Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var T=s(6595),L=s(2735),H=s(2135),I=s(875);let D={alpine:"高山滑雪","snowboard-slopestyle":"单板坡面障碍技巧","snowboard-parallel":"单板平行项目","freestyle-slopestyle":"自由式坡面障碍技巧"},P={alpine:[{value:"回转",label:"回转 (SL)"},{value:"大回转",label:"大回转 (GS)"},{value:"超级大回转",label:"超级大回转 (SG)"}],"snowboard-slopestyle":[{value:"坡面障碍",label:"坡面障碍技巧 (SS)"},{value:"大跳台",label:"大跳台 (BA)"}],"snowboard-parallel":[{value:"平行大回转",label:"平行大回转 (PGS)"},{value:"平行回转",label:"平行回转 (PSL)"}],"freestyle-slopestyle":[{value:"坡面障碍",label:"坡面障碍技巧 (SS)"},{value:"大跳台",label:"大跳台 (BA)"}]};function M(){let e=(0,r.useRouter)(),[t,d]=(0,n.useState)(null),[M,A]=(0,n.useState)([]),[F,R]=(0,n.useState)(null),[U,E]=(0,n.useState)(0),[B,z]=(0,n.useState)(""),[G,J]=(0,n.useState)("all"),[K,q]=(0,n.useState)(!0),[V,_]=(0,n.useState)(!1),[W,Y]=(0,n.useState)(null),[X,Q]=(0,n.useState)("upload"),[$,ee]=(0,n.useState)(!1),[et,es]=(0,n.useState)(null),[ea,en]=(0,n.useState)(0),[er,ei]=(0,n.useState)(new Set([0])),{showToast:el}=(0,l.p)(),[ec,ed]=(0,n.useState)("all"),[eo,em]=(0,n.useState)("all"),[ex,eu]=(0,n.useState)("all"),eh=async()=>{if(t){ee(!0);try{await new Promise(e=>setTimeout(e,2e3)),Q("confirm"),el("成功导入 ".concat(t.competitors.length," 名运动员的比赛成绩！积分已自动计算完成，排名已更新。"),"success")}catch(e){el("导入过程中发生错误，请重试","error")}finally{ee(!1)}}},ef=()=>{d(null),A([]),R(null),E(0),Q("upload"),Y(null),es(null),en(0),ei(new Set([0])),ed("all"),em("all"),eu("all")},ep=async e=>{_(!0),Y(null),es("pdf"),en(10);try{if(!e.type.includes("pdf")&&!e.name.toLowerCase().endsWith(".pdf"))throw Error("请选择有效的PDF文件");en(20);let t=await Promise.all([s.e(5651),s.e(9284),s.e(895)]).then(s.t.bind(s,3194,23));t.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",en(30);let a=await e.arrayBuffer(),n=await t.getDocument({data:a}).promise;en(40);let r=[],i=new Set;for(let e=1;e<=n.numPages;e++){let t=await n.getPage(e),s=await t.getTextContent(),a=s.items.map(e=>"str"in e?e.str:"").join(" "),l=a.includes("积分表"),c=a.includes("高山滑雪")&&(a.includes("回转")||a.includes("大回转")),d=a.includes("单板滑雪大跳台")||a.includes("单板")&&a.includes("大跳台"),o=a.includes("单板")&&a.includes("坡面障碍"),m=a.includes("自由式")&&(a.includes("坡面障碍")||a.includes("大跳台")),x=a.includes("成绩公告")||a.includes("成 绩 公 告");if(!l&&!c&&!d&&!o&&!m&&!x)continue;let u=null,h="",f="";if((u=a.match(/(U\d{2})\s*(男|女)\s*子\s*组\s*(回转|大回转|超级大回转)/))&&(f="alpine"),!u){let e=a.match(/高山滑雪[^\w]*(回转|大回转|超级大回转)[^\w]*(男|女)[^\w]*(U\d{2})/);e&&(u=[e[0],e[3],e[2],e[1]],f="alpine")}if(!u&&(d||x&&a.includes("单板"))){let e=a.match(/(U\d{2})(男|女)子组/);e&&(h=d?"大跳台":o?"坡面障碍":"",u=[e[0],e[1],e[2],h],f=d?"snowboard-bigair":"snowboard-slopestyle")}if(!u&&m){let e=a.match(/(U\d{2})(男|女)子组/);e&&(h=a.includes("大跳台")?"大跳台":"坡面障碍",u=[e[0],e[1],e[2],h],f="freestyle")}if(!u)continue;let[,p,g,y]=u,b=h||y||"未知项目",N=g+"子",j="".concat(p,"-").concat(N,"-").concat(b);l&&i.add(j),r.push({pageNum:e,pageText:a,textContent:s,hasPointsTable:l,hasResultAnnouncement:x,ageGroup:p,gender:N,discipline:b,sportType:f}),en(40+Math.floor(e/n.numPages*25))}let l=[],d=0,o=new Map;for(let e of r){let t="".concat(e.ageGroup,"-").concat(e.gender,"-").concat(e.discipline);if(i.has(t)&&!e.hasPointsTable)continue;let{textContent:s,ageGroup:a,gender:n,discipline:l,hasPointsTable:c,sportType:d}=e,m=s.items.filter(e=>"str"in e&&"transform"in e).map(e=>({str:e.str,x:Math.round(e.transform[4]),y:Math.round(e.transform[5])})),x={};m.forEach(e=>{let t=8*Math.round(e.y/8);x[t]||(x[t]=[]),x[t].push(e)});let u=Object.keys(x).map(Number).sort((e,t)=>t-e),h=[];for(let e of u){let t=x[e].sort((e,t)=>e.x-t.x).map(e=>e.str).join(" ").trim();if(!t||t.length<10||!/^\s*\d/.test(t)||/^[\d\s]+$/.test(t)||t.includes("名次")||t.includes("排名")||t.includes("姓名")||t.includes("成绩排名"))continue;let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alpine",s=e.replace(/^\s*\|\s*/,"").trim(),a=s.match(/[\u4e00-\u9fa5·]{2,5}/);if(!a)return null;let n=a[0],r=s.match(/\d{1,2}:\d{2}\.\d{2}|\d+\.\d+|\d+/g)||[];if(t.includes("bigair")||t.includes("slopestyle")||"freestyle"===t){if(/^\s*[23]\s+\d+\s+\d+\s+\d+/.test(s)&&!s.includes(" G ")&&!s.includes(" R ")||!(/[|\s][GR][|\s]/.test(s)||s.includes(" G ")||s.includes(" R "))||r.length<8)return null;let e=r[0];if(!e)return null;let t=parseInt(e);if(t<1||t>99)return null;let a=r[1],i=a?parseInt(a):t,l=0,c="-";for(let e=r.length-1;e>=0;e--){let t=parseFloat(r[e]);if(Number.isInteger(t)&&t>=1&&t<=360){l=t,e>0&&r[e-1].includes(".")&&(c=r[e-1]);break}}if(0===l)return null;let d="-",o=s.substring(s.indexOf(n)+n.length).match(/[\u4e00-\u9fa5]{2,15}/);return o&&(d=o[0]),{rank:t,bib:i>0&&i<1e3?i:t,name:n.trim(),organization:d,run1Time:"-",run2Time:"-",totalTime:c,points:l,status:"OK"}}if(r.length<3)return null;let i=r[0];if(!i)return null;let l=parseInt(i);if(l<1||l>99)return null;let c=r[1],d=c?parseInt(c):l,o="-",m=s.substring(s.indexOf(n)+n.length).match(/[\u4e00-\u9fa5]{2,15}/);m&&(o=m[0]);let x=0,u="-",h="-",f="-",p=r.filter(e=>e.includes(".")||e.includes(":"));p.length>=1&&(p.length>=3?(u=p[0],h=p[1],f=p[2]):p.length>=1&&(f=p[p.length-1]));for(let e=r.length-1;e>=0;e--){let t=r[e];if(!t||t.includes(".")||t.includes(":"))continue;let s=parseInt(t);if(s>=1&&s<=360){x=s;break}}return 0===x&&"-"===f?null:{rank:l,bib:d>0&&d<1e3?d:l,name:n.trim(),organization:o,run1Time:u,run2Time:h,totalTime:f,points:x,status:"OK"}}(t,d);s&&h.push(s)}if(h.length>0){let s=o.get(t);if(s){let t=new Set(s.results.map(e=>e.rank)),a=h.filter(e=>!t.has(e.rank));s.results.push(...a),s.pageNums.push(e.pageNum)}else o.set(t,{results:[...h],pageNums:[e.pageNum],ageGroup:a,gender:n,discipline:l,dataSource:c?"pointsTable":"resultAnnouncement",sportType:d})}en(65+Math.floor(o.size/r.length*30))}if(en(95),Array.from(o.entries()).forEach(e=>{let[t,s]=e;s.results.sort((e,t)=>e.rank-t.rank),l.push({ageGroup:s.ageGroup,gender:s.gender,discipline:s.discipline,results:s.results,dataSource:s.dataSource,pageNum:s.pageNums[0]}),d+=s.results.length}),0===l.length)throw Error("未找到有效的积分表页面，请确认PDF格式正确");let m="未知站点",x="2025-2026赛季",u=await n.getPage(1),h=(await u.getTextContent()).items.map(e=>"str"in e?e.str:"").join(" "),f=h.match(/（([^）]+站)）/)||h.match(/\(([^)]+站)\)/);f&&(m=f[1]);let p=h.match(/(\d{4}-\d{4})赛季/);p&&(x=p[0]);let g="alpine";if(h.includes("单板")&&(h.includes("坡面障碍")||h.includes("大跳台")))g="snowboard-slopestyle";else if(h.includes("单板")&&h.includes("平行"))g="snowboard-parallel";else if(h.includes("自由式")&&(h.includes("坡面障碍")||h.includes("大跳台")))g="freestyle-slopestyle";else if(l.length>0){let e=l[0].discipline;e.includes("坡面")||e.includes("大跳")?h.includes("单板")?g="snowboard-slopestyle":h.includes("自由式")&&(g="freestyle-slopestyle"):e.includes("平行")&&(g="snowboard-parallel")}let y={stationName:m,seasonName:x,sportType:g,competitions:l};for(let e of(R(y),A(l),ei(new Set([0])),en(100),Q("review"),l)){let t="".concat(m,"-").concat(e.ageGroup,"-").concat(e.gender,"-").concat(e.discipline).replace(/\s+/g,"-"),s="alpine";e.discipline.includes("坡面")||e.discipline.includes("slopestyle")?s=e.discipline.includes("单板")?"snowboard-slopestyle":"freestyle-slopestyle":e.discipline.includes("大跳")||e.discipline.includes("bigair")?s=e.discipline.includes("单板")?"snowboard-bigair":"freestyle-bigair":e.discipline.includes("平行")&&(s="snowboard-parallel");let a={id:t,name:"".concat(x," ").concat(m," ").concat(e.ageGroup," ").concat(e.gender," ").concat(e.discipline),date:new Date().toISOString().split("T")[0],location:m,discipline:e.discipline,sportType:s,participants:e.results.length,finishers:e.results.filter(e=>"OK"===e.status).length,dns:e.results.filter(e=>"DNS"===e.status).length,dnf:e.results.filter(e=>"DNF"===e.status).length,dsq:e.results.filter(e=>"DSQ"===e.status).length,importedAt:new Date().toISOString()},n=[],r=[],i=e.gender.includes("男"),l=e.results.map(e=>({competitionId:t,rank:e.rank,bibNumber:String(e.bib),name:e.name,team:e.organization,gender:i?"male":"female",run1Time:e.run1Time||"-",run2Time:e.run2Time||"-",totalTime:e.totalTime||"-",points:e.points,status:"OK"===e.status?"finished":"DNS"===e.status?"dns":"DNF"===e.status?"dnf":"dsq"}));i?n.push(...l):r.push(...l);let d={competition:a,results:{male:n,female:r}};(0,c.T2)(d)}el("成功解析 ".concat(m," ").concat(l.length," 场比赛，共 ").concat(d," 名运动员，已保存到本地"),"success")}catch(e){Y(e instanceof Error?e.message:"PDF解析失败，请检查文件格式"),el("PDF解析失败","error")}finally{_(!1)}},eg=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;if(s.name.toLowerCase().endsWith(".pdf")){await ep(s);return}_(!0),Y(null),es("xml");let a=new FileReader;a.onload=e=>{try{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;if(!s)throw Error("无法读取文件内容");if(!s.includes("<Fisresults>")||!s.includes("</Fisresults>"))throw Error("文件不是有效的XML格式");let a=i.parseCompetitionXML(s);d(a),Q("review")}catch(e){Y(e instanceof Error?e.message:"文件解析失败，请检查XML格式是否正确")}finally{_(!1)}},a.onerror=()=>{Y("文件读取失败，请重试"),_(!1)},a.readAsText(s,"utf-8")},ey=(null==t?void 0:t.competitors.filter(e=>{let t=e.lastname.toLowerCase().includes(B.toLowerCase())||e.firstname.toLowerCase().includes(B.toLowerCase())||e.fisCode.includes(B),s="all"===G||e.nation===G;return t&&s}).sort((e,t)=>e.rank-t.rank))||[],eb=Array.from(new Set((null==t?void 0:t.competitors.map(e=>e.nation))||[]));return i.getNationFlag,(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative",children:[(0,a.jsxs)("div",{className:"text-center mb-8 relative z-10",children:[(0,a.jsx)("h1",{className:"section-title",children:"比赛成绩导入"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"导入中国标准格式的比赛成绩数据，使用公式自动计算积分和排名"})]}),(0,a.jsx)("div",{className:"flex justify-center mb-8 relative z-10",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg ".concat("upload"===X?"bg-ski-blue text-white":["review","confirm"].includes(X)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:[(0,a.jsx)(o,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"1. 上传文件"})]}),(0,a.jsx)("div",{className:"w-8 h-0.5 ".concat(["review","confirm"].includes(X)?"bg-green-400":"bg-gray-300")}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg ".concat("review"===X?"bg-ski-blue text-white":"confirm"===X?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"2. 审核数据"})]}),(0,a.jsx)("div",{className:"w-8 h-0.5 ".concat("confirm"===X?"bg-green-400":"bg-gray-300")}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg ".concat("confirm"===X?"bg-ski-blue text-white":"bg-gray-100 text-gray-600"),children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"3. 确认导入"})]})]})}),"upload"===X&&(0,a.jsx)("div",{className:"card mb-8 relative z-10",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full",children:(0,a.jsx)(u,{className:"h-10 w-10 text-blue-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-ski-navy mb-2",children:"上传比赛成绩PDF"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"支持官方PDF成绩册，系统将自动识别并解析运动员成绩"}),W&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:W})}),V&&ea>0&&(0,a.jsxs)("div",{className:"mb-6 max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"正在解析PDF文件..."}),(0,a.jsxs)("span",{className:"text-sm font-medium text-ski-blue",children:[ea,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-ski-blue h-2 rounded-full transition-all duration-300",style:{width:"".concat(ea,"%")}})})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("label",{className:"btn-primary flex items-center justify-center cursor-pointer px-8 py-3 text-lg",children:[(0,a.jsx)(u,{className:"h-5 w-5 mr-2"}),V?"解析中...":"选择PDF文件上传",(0,a.jsx)("input",{type:"file",accept:".pdf",onChange:eg,className:"hidden",disabled:V})]})}),(0,a.jsx)("div",{className:"mt-8 max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-blue-600 mr-2"}),(0,a.jsx)("span",{className:"font-semibold text-blue-800",children:"支持的成绩格式"})]}),(0,a.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,a.jsx)("li",{children:"• 高山滑雪U系列成绩（时间制）"}),(0,a.jsx)("li",{children:"• 单板大跳台成绩（裁判评分制）"}),(0,a.jsx)("li",{children:"• 自由式坡面障碍技巧成绩"}),(0,a.jsx)("li",{children:"• 自动识别比赛类型和年龄组"})]})]})})]})}),"review"===X&&(t||M.length>0)&&(0,a.jsx)("div",{className:"card mb-8 relative z-10",children:(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-ski-navy mb-4",children:"数据审核完成"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:M.length>0?(0,a.jsxs)(a.Fragment,{children:["已成功解析 ",(0,a.jsx)("span",{className:"font-semibold text-ski-blue",children:M.length})," 场比赛， 共 ",(0,a.jsx)("span",{className:"font-semibold text-ski-blue",children:M.reduce((e,t)=>e+t.results.length,0)})," 名运动员"]}):(0,a.jsxs)(a.Fragment,{children:["已成功解析 ",(0,a.jsx)("span",{className:"font-semibold text-ski-blue",children:(null==t?void 0:t.competitors.length)||0})," 名运动员的比赛成绩"]})}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsxs)("button",{onClick:ef,className:"btn-secondary flex items-center",children:[(0,a.jsx)(o,{className:"h-4 w-4 mr-2"}),"重新上传"]}),(0,a.jsx)("button",{onClick:eh,disabled:$,className:"btn-primary flex items-center",children:$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"处理中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"确认导入成绩"]})})]})]})}),"confirm"===X&&t&&(0,a.jsx)("div",{className:"card mb-8 relative z-10",children:(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"成绩导入成功！"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:[t.competitors.length," 名运动员的比赛成绩已成功导入系统，积分已自动计算并更新排名"]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,a.jsxs)("button",{onClick:ef,className:"btn-secondary flex items-center",children:[(0,a.jsx)(o,{className:"h-4 w-4 mr-2"}),"导入新成绩"]}),(0,a.jsxs)("button",{onClick:()=>e.push("/points/rankings"),className:"btn-primary flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"查看积分排名"]})]})]})}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"card mb-8 relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-ski-navy flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-8 w-8 text-yellow-600 mr-3"}),"赛事基本信息"]}),(0,a.jsxs)("button",{onClick:()=>q(!K),className:"btn-secondary flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),K?"隐藏详情":"显示详情"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 mr-2"}),"赛事信息"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"赛事级别:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceHeader.level})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"赛季:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceHeader.season})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"代码:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceHeader.codex})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"国家:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[i.getNationFlag(t.raceHeader.nation)," ",t.raceHeader.nation]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"项目:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[i.getDisciplineName(t.raceHeader.discipline)," (",t.raceHeader.discipline,")"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"类别:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceHeader.category})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"性别:"}),(0,a.jsx)("div",{className:"text-gray-700",children:i.getSexName(t.raceHeader.sex)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"类型:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceHeader.type})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"比赛详情"]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"比赛日期:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceHeader.raceDate.formatted})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"赛事名称:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceHeader.eventName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"举办地点:"}),(0,a.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-1"}),t.raceHeader.place]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"技术代表:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[t.raceHeader.td.lastname,i.getNationFlag(t.raceHeader.td.nation)," (",t.raceHeader.td.nation,")",(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["#",t.raceHeader.td.number]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 mr-2"}),"裁判团队"]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"主裁判:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[t.jury.referee.firstname," ",t.jury.referee.lastname,i.getNationFlag(t.jury.referee.nation)," (",t.jury.referee.nation,")"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"赛事主管:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[t.jury.chiefRace.firstname," ",t.jury.chiefRace.lastname,i.getNationFlag(t.jury.chiefRace.nation)," (",t.jury.chiefRace.nation,")"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"技术参数"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"适用Penalty:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceInfo.appliedPenalty})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"计算Penalty:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceInfo.calculatedPenalty})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"F值:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceInfo.fValue})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"计时系统:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceInfo.timingBy})]})]})]})]})]})]}),K&&(0,a.jsxs)("div",{className:"card mb-8 relative z-10",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-ski-navy mb-6 flex items-center",children:[(0,a.jsx)(N.Z,{className:"h-8 w-8 text-green-600 mr-3"}),"赛道信息"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.courses.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-4 flex items-center",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"第",e.run,"轮 - ",e.name]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"开始时间:"}),(0,a.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-1"}),e.startTime]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"门数:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[e.gates," (转向门:",e.turningGates,")"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"起点海拔:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[e.startElev,"米"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"终点海拔:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[e.finishElev,"米"]})]})]}),e.homologation&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Homologation:"}),(0,a.jsx)("div",{className:"text-gray-700",children:e.homologation})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"赛道设置者:"}),(0,a.jsxs)("div",{className:"text-gray-700",children:[e.courseSetter.lastname,i.getNationFlag(e.courseSetter.nation)," (",e.courseSetter.nation,")"]})]})]})]},t))}),(0,a.jsxs)("div",{className:"mt-6 bg-blue-50 rounded-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-4 flex items-center",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 mr-2"}),"天气情况"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"雪质:"}),(0,a.jsx)("div",{className:"text-gray-700",children:t.raceInfo.weather.snow})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"天气:"}),(0,a.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 mr-1"}),t.raceInfo.weather.weather]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"起点气温:"}),(0,a.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,a.jsx)(C,{className:"h-4 w-4 mr-1"}),t.raceInfo.weather.temperatureAirStart,"\xb0C"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"终点气温:"}),(0,a.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,a.jsx)(C,{className:"h-4 w-4 mr-1"}),t.raceInfo.weather.temperatureAirFinish,"\xb0C"]})]})]})]})]}),(0,a.jsx)("div",{className:"card mb-6 relative z-10",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(S.Z,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,a.jsx)("input",{type:"text",placeholder:"搜索选手姓名或FIS代码...",value:B,onChange:e=>z(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ski-blue focus:border-transparent"})]}),(0,a.jsxs)("select",{value:G,onChange:e=>J(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ski-blue",children:[(0,a.jsx)("option",{value:"all",children:"所有国家"}),eb.map(e=>(0,a.jsxs)("option",{value:e,children:[i.getNationFlag(e)," ",e]},e))]})]})}),(0,a.jsxs)("div",{className:"card relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-ski-navy flex items-center",children:[(0,a.jsx)(O.Z,{className:"h-8 w-8 text-red-600 mr-3"}),"选手排名信息"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:["pdf"===et&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,a.jsx)(u,{className:"h-3 w-3 mr-1"}),"PDF导入"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["共 ",ey.length," 名选手"]})]})]}),(0,a.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:(0,a.jsx)("div",{className:"overflow-x-auto max-h-[500px] overflow-y-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"排名"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"号码"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"姓名"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"单位/国家"}),ey.some(e=>e.run1Time||e.totalTime)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Z,{className:"h-3 w-3 mr-1"}),"第一轮"]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Z,{className:"h-3 w-3 mr-1"}),"第二轮"]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"总成绩"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"差距"})]}),ey.some(e=>void 0!==e.finalScore)&&(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3 mr-1"}),"最终得分"]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),"积分"]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"状态"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ey.map((e,t)=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(e.rank<=3?"bg-yellow-50":t%2==0?"bg-white":"bg-gray-50"),children:[(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.rank<=3&&(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-1 ".concat(1===e.rank?"text-yellow-500":2===e.rank?"text-gray-400":"text-orange-600")}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.rank})]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.bib})}),(0,a.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.lastname,e.firstname?" ".concat(e.firstname):""]}),(0,a.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 min-w-[200px]",children:(0,a.jsxs)("span",{className:"flex items-center",children:[e.nation&&i.getNationFlag(e.nation),(0,a.jsx)("span",{className:"ml-1",children:e.nation||"-"})]})}),ey.some(e=>e.run1Time||e.totalTime)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:e.run1Time||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:e.run2Time||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono font-semibold text-ski-blue",children:e.totalTime||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono text-gray-500",children:e.difference||"-"})]}),ey.some(e=>void 0!==e.finalScore)&&(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-ski-blue",children:(null===(s=e.finalScore)||void 0===s?void 0:s.toFixed(2))||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e.points||0)>=300?"bg-yellow-100 text-yellow-800":(e.points||0)>=200?"bg-green-100 text-green-800":(e.points||0)>=100?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:[e.points||0," 分"]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:""===e.status||"OK"===e.status?(0,a.jsx)("span",{className:"text-green-600",children:"完赛"}):(0,a.jsx)("span",{className:"text-red-600",children:e.status})})]},"".concat(e.bib,"-").concat(t))})})]})})})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4 mt-8 relative z-10",children:[(0,a.jsxs)("button",{className:"btn-primary flex items-center",onClick:()=>{if(!(null==t?void 0:t.competitors)||0===t.competitors.length){el("没有数据可导出","warning");return}let e=t.competitors.some(e=>e.run1Time||e.totalTime),s=t.competitors.some(e=>void 0!==e.finalScore),a=[...t.competitors].sort((e,t)=>e.rank-t.rank),n=function(e){let{filename:t,data:s,columns:a,title:n}=e;if(!s||0===s.length)return{success:!1,message:"没有数据可导出"};let r=a||Object.keys(s[0]),i=new Blob(['\n    <html>\n      <head>\n        <meta charset="utf-8">\n        <title>'.concat(n||t,"</title>\n        <style>\n          table { border-collapse: collapse; width: 100%; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          th { background-color: #f2f2f2; font-weight: bold; }\n          .title { font-size: 18px; font-weight: bold; margin-bottom: 10px; }\n        </style>\n      </head>\n      <body>\n        ").concat(n?'<div class="title">'.concat(n,"</div>"):"","\n        <table>\n          <thead>\n            <tr>\n              ").concat(r.map(e=>"<th>".concat(e,"</th>")).join(""),"\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(s.map(e=>"<tr>".concat(r.map(t=>"<td>".concat(e[t]||"","</td>")).join(""),"</tr>")).join(""),"\n          </tbody>\n        </table>\n      </body>\n    </html>\n  ")],{type:"application/vnd.ms-excel"}),l=document.createElement("a"),c=URL.createObjectURL(i);return l.setAttribute("href",c),l.setAttribute("download","".concat(t,".xls")),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(c),{success:!0,message:"导出成功"}}({filename:"".concat(t.raceHeader.eventName||"比赛成绩","_").concat(new Date().toISOString().split("T")[0]),data:a.map(t=>{let a={排名:t.rank,号码布:t.bib,姓名:t.firstname?"".concat(t.lastname," ").concat(t.firstname):t.lastname,"单位/国家":t.nation||"-"};if(e&&(a["第一轮"]=t.run1Time||"-",a["第二轮"]=t.run2Time||"-",a["总成绩"]=t.totalTime||"-",a["差距"]=t.difference||"-"),s){var n;a["最终得分"]=(null===(n=t.finalScore)||void 0===n?void 0:n.toFixed(2))||"-"}return a["积分"]=t.points||0,a["状态"]=""===t.status||"OK"===t.status?"完赛":t.status,a}),title:t.raceHeader.eventName||"比赛成绩"});n.success?el("导出成功","success"):el(n.message,"error")},children:[(0,a.jsx)(L.Z,{className:"h-5 w-5 mr-2"}),"导出Excel"]}),(0,a.jsxs)("button",{className:"btn-secondary flex items-center",onClick:()=>{if(!t){el("请先导入比赛数据","warning");return}let e=new Blob(['\n      <!DOCTYPE html>\n      <html lang="zh-CN">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>'.concat(t.raceHeader.eventName,' - 比赛报告</title>\n        <style>\n          body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", "Hiragino Sans GB", "Noto Sans SC", sans-serif; margin: 20px; background: #f5f5f5; }\n          .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2563eb; padding-bottom: 20px; }\n          .title { color: #1e40af; font-size: 2.5em; margin: 0; }\n          .subtitle { color: #64748b; font-size: 1.2em; margin: 10px 0; }\n          .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }\n          .info-card { background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6; }\n          .info-label { font-weight: bold; color: #374151; margin-bottom: 5px; }\n          .info-value { color: #1f2937; font-size: 1.1em; }\n          .results-table { width: 100%; border-collapse: collapse; margin: 30px 0; }\n          .results-table th, .results-table td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }\n          .results-table th { background: #f3f4f6; font-weight: bold; color: #374151; }\n          .results-table tr:hover { background: #f9fafb; }\n          .rank-1 { background: #fef3c7 !important; }\n          .rank-2 { background: #e5e7eb !important; }\n          .rank-3 { background: #fed7aa !important; }\n          .statistics { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }\n          .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; text-align: center; }\n          .stat-number { font-size: 2em; font-weight: bold; margin-bottom: 5px; }\n          .stat-label { opacity: 0.9; }\n          .weather-info { background: #ecfccb; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; color: #64748b; }\n          @media print { body { background: white; } .container { box-shadow: none; } }\n        </style>\n      </head>\n      <body>\n        <div class="container">\n          <div class="header">\n            <h1 class="title">').concat(t.raceHeader.eventName,'</h1>\n            <p class="subtitle">官方比赛结果报告</p>\n            <p class="subtitle">生成时间: ').concat(new Date().toLocaleString("zh-CN"),'</p>\n          </div>\n\n          <div class="info-grid">\n            <div class="info-card">\n              <div class="info-label">比赛日期</div>\n              <div class="info-value">').concat(t.raceHeader.raceDate.formatted,'</div>\n            </div>\n            <div class="info-card">\n              <div class="info-label">比赛地点</div>\n              <div class="info-value">').concat(t.raceHeader.place,'</div>\n            </div>\n            <div class="info-card">\n              <div class="info-label">比赛项目</div>\n              <div class="info-value">').concat(t.raceHeader.discipline,'</div>\n            </div>\n            <div class="info-card">\n              <div class="info-label">参赛人数</div>\n              <div class="info-value">').concat(t.competitors.length,'人</div>\n            </div>\n          </div>\n\n          <div class="statistics">\n            <div class="stat-card">\n              <div class="stat-number">').concat(t.competitors.length,'</div>\n              <div class="stat-label">总参赛人数</div>\n            </div>\n            <div class="stat-card">\n              <div class="stat-number">').concat(t.competitors.filter(e=>"OK"===e.status||""===e.status).length,'</div>\n              <div class="stat-label">完赛人数</div>\n            </div>\n            <div class="stat-card">\n              <div class="stat-number">').concat(t.competitors.filter(e=>"DNF"===e.status).length,'</div>\n              <div class="stat-label">未完赛(DNF)</div>\n            </div>\n            <div class="stat-card">\n              <div class="stat-number">').concat(t.competitors.filter(e=>"DSQ"===e.status||"DQ"===e.status).length,'</div>\n              <div class="stat-label">取消资格(DSQ)</div>\n            </div>\n          </div>\n\n          <h2>比赛成绩</h2>\n          <table class="results-table">\n            <thead>\n              <tr>\n                <th>排名</th>\n                <th>号码布</th>\n                <th>姓名</th>\n                <th>单位/国家</th>\n                ').concat(t.competitors.some(e=>e.run1Time||e.totalTime)?"\n                <th>第一轮</th>\n                <th>第二轮</th>\n                <th>总成绩</th>\n                <th>差距</th>\n                ":"","\n                ").concat(t.competitors.some(e=>void 0!==e.finalScore)?"\n                <th>最终得分</th>\n                ":"","\n                <th>积分</th>\n                <th>状态</th>\n              </tr>\n            </thead>\n            <tbody>\n              ").concat([...t.competitors].sort((e,t)=>e.rank-t.rank).map(e=>{var s;let a=e.rank,n=1===a?"rank-1":2===a?"rank-2":3===a?"rank-3":"",r=e.firstname?"".concat(e.lastname," ").concat(e.firstname):e.lastname,i=t.competitors.some(e=>e.run1Time||e.totalTime),l=t.competitors.some(e=>void 0!==e.finalScore);return'\n                  <tr class="'.concat(n,'">\n                    <td><strong>').concat(a,"</strong></td>\n                    <td>").concat(e.bib,"</td>\n                    <td><strong>").concat(r,"</strong></td>\n                    <td>").concat(e.nation||"-","</td>\n                    ").concat(i?"\n                    <td>".concat(e.run1Time||"-","</td>\n                    <td>").concat(e.run2Time||"-","</td>\n                    <td><strong>").concat(e.totalTime||"-","</strong></td>\n                    <td>").concat(e.difference||"-","</td>\n                    "):"","\n                    ").concat(l?"\n                    <td><strong>".concat((null===(s=e.finalScore)||void 0===s?void 0:s.toFixed(2))||"-","</strong></td>\n                    "):"","\n                    <td>").concat(e.points||0,"</td>\n                    <td>").concat(""===e.status||"OK"===e.status?"完赛":e.status,"</td>\n                  </tr>\n                ")}).join(""),'\n            </tbody>\n          </table>\n\n          <div class="footer">\n            <p>本报告由高山滑雪竞赛管理系统自动生成</p>\n            <p>符合中国滑雪协会(FIS)标准 | 官方认证</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    ')],{type:"text/html;charset=utf-8"}),s=document.createElement("a"),a=URL.createObjectURL(e);s.setAttribute("href",a),s.setAttribute("download","".concat(t.raceHeader.eventName,"_详细报告_").concat(new Date().toISOString().split("T")[0],".html")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),el("报告生成成功！已下载到本地。","success")},children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"生成报告"]})]})]}),F&&M.length>0&&(0,a.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-ski-navy flex items-center",children:[(0,a.jsx)(N.Z,{className:"h-8 w-8 text-blue-600 mr-3"}),F.seasonName," ",D[F.sportType],"U系列比赛"]}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-1"}),F.stationName]})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["共解析到 ",(0,a.jsx)("span",{className:"font-semibold text-ski-blue",children:M.length})," 场比赛，",(0,a.jsx)("span",{className:"font-semibold text-ski-blue",children:M.reduce((e,t)=>e+t.results.length,0)})," 名运动员"]})]}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mr-2",children:"项目:"}),(0,a.jsxs)("select",{value:ec,onChange:e=>ed(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ski-blue text-sm",children:[(0,a.jsx)("option",{value:"all",children:"全部项目"}),P[F.sportType].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mr-2",children:"年龄组:"}),(0,a.jsxs)("select",{value:eo,onChange:e=>em(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ski-blue text-sm",children:[(0,a.jsx)("option",{value:"all",children:"全部年龄组"}),(0,a.jsx)("option",{value:"U11",children:"U11"}),(0,a.jsx)("option",{value:"U15",children:"U15"}),(0,a.jsx)("option",{value:"U18",children:"U18"})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mr-2",children:"性别:"}),(0,a.jsxs)("select",{value:ex,onChange:e=>eu(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ski-blue text-sm",children:[(0,a.jsx)("option",{value:"all",children:"全部"}),(0,a.jsx)("option",{value:"男子",children:"男子"}),(0,a.jsx)("option",{value:"女子",children:"女子"})]})]}),("all"!==ec||"all"!==eo||"all"!==ex)&&(0,a.jsx)("button",{onClick:()=>{ed("all"),em("all"),eu("all")},className:"text-sm text-ski-blue hover:underline",children:"清除筛选"})]})}),M.filter(e=>"all"===ec||e.discipline===ec).filter(e=>"all"===eo||e.ageGroup===eo).filter(e=>"all"===ex||e.gender===ex).map((e,t)=>{let s=M.indexOf(e),n=er.has(s);return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between cursor-pointer py-2",onClick:()=>{let e=new Set(er);n?e.delete(s):e.add(s),ei(e)},children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-ski-navy flex items-center flex-wrap gap-2",children:[(0,a.jsx)(f.Z,{className:"h-6 w-6 ".concat(0===t?"text-yellow-500":"text-gray-400")}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-blue-100 text-blue-800 text-sm",children:e.discipline}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-green-100 text-green-800 text-sm",children:e.gender}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-purple-100 text-purple-800 text-sm",children:e.ageGroup}),(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",e.results.length," 人)"]}),e.dataSource&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs ".concat("pointsTable"===e.dataSource?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"),children:[(0,a.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"pointsTable"===e.dataSource?"积分表":"成绩公告",e.pageNum&&" (P".concat(e.pageNum,")")]})]}),(0,a.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n?(0,a.jsx)(H.Z,{className:"h-5 w-5 text-gray-500"}):(0,a.jsx)(I.Z,{className:"h-5 w-5 text-gray-500"})})]}),n&&(0,a.jsx)("div",{className:"mt-4 overflow-hidden rounded-lg border border-gray-200",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"排名"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"号码"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"姓名"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"单位"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Z,{className:"h-3 w-3 mr-1"}),"总成绩"]})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),"积分"]})})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.results.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(e.rank<=3?"bg-yellow-50":t%2==0?"bg-white":"bg-gray-50"),children:[(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.rank<=3&&(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-1 ".concat(1===e.rank?"text-yellow-500":2===e.rank?"text-gray-400":"text-orange-600")}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.rank})]})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.bib})}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 min-w-[200px]",title:e.organization,children:e.organization||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-ski-blue min-w-[120px]",children:e.totalTime||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.points>=300?"bg-yellow-100 text-yellow-800":e.points>=200?"bg-green-100 text-green-800":e.points>=100?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:[e.points," 分"]})})]},t))})]})})})]},s)}),0===M.filter(e=>"all"===ec||e.discipline===ec).filter(e=>"all"===eo||e.ageGroup===eo).filter(e=>"all"===ex||e.gender===ex).length&&(0,a.jsxs)("div",{className:"card text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"没有符合筛选条件的比赛"}),(0,a.jsx)("button",{onClick:()=>{ed("all"),em("all"),eu("all")},className:"mt-2 text-ski-blue hover:underline",children:"清除筛选条件"})]}),(0,a.jsx)("div",{className:"flex justify-center space-x-4 mt-8",children:(0,a.jsxs)("button",{onClick:ef,className:"btn-secondary flex items-center",children:[(0,a.jsx)(o,{className:"h-5 w-5 mr-2"}),"重新上传"]})})]})]})}},9065:function(e,t,s){"use strict";s.d(t,{V:function(){return x},p:function(){return m}});var a=s(7437),n=s(2265),r=s(5302),i=s(2252),l=s(3639),c=s(3245),d=s(2489);let o=(0,n.createContext)(void 0);function m(){let e=(0,n.useContext)(o);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function x(e){let{children:t}=e,[s,r]=(0,n.useState)([]),i=(0,n.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),l=(0,n.useRef)(new Map),c=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,a="toast-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),n={id:a,message:e,type:t,duration:s};if(r(e=>[...e,n]),s>0){let e=setTimeout(()=>{i(a),l.current.delete(a)},s);l.current.set(a,e)}},[i]);return(0,n.useEffect)(()=>{let e=l.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear()}},[]),(0,a.jsxs)(o.Provider,{value:{showToast:c,hideToast:i},children:[t,(0,a.jsx)(u,{toasts:s,onClose:i})]})}function u(e){let{toasts:t,onClose:s}=e;return 0===t.length?null:(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(e=>(0,a.jsx)(h,{toast:e,onClose:s},e.id))})}function h(e){let{toast:t,onClose:s}=e,n={success:(0,a.jsx)(r.Z,{className:"w-5 h-5 text-green-500"}),error:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-red-500"}),warning:(0,a.jsx)(l.Z,{className:"w-5 h-5 text-yellow-500"}),info:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-blue-500"})};return(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-lg border shadow-lg animate-slide-in ".concat({success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",warning:"bg-yellow-50 border-yellow-200",info:"bg-blue-50 border-blue-200"}[t.type]),role:"alert",children:[n[t.type],(0,a.jsx)("p",{className:"flex-1 text-sm text-gray-700 whitespace-pre-line",children:t.message}),(0,a.jsx)("button",{onClick:()=>s(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]})}},4670:function(e,t,s){"use strict";s.d(t,{Fw:function(){return l},T2:function(){return n},ld:function(){return c},z$:function(){return r}});let a={COMPETITIONS:"ski-competitions",RESULTS:"ski-results",LAST_IMPORT:"ski-last-import"};function n(e){try{let t=r(),s=t.findIndex(t=>t.id===e.competition.id);s>=0?t[s]=e.competition:t.unshift(e.competition),localStorage.setItem(a.COMPETITIONS,JSON.stringify(t));let n=i();return n[e.competition.id]=e.results,localStorage.setItem(a.RESULTS,JSON.stringify(n)),localStorage.setItem(a.LAST_IMPORT,new Date().toISOString()),!0}catch(e){return!1}}function r(){try{let e=localStorage.getItem(a.COMPETITIONS);return e?JSON.parse(e):[]}catch(e){return[]}}function i(){try{let e=localStorage.getItem(a.RESULTS);return e?JSON.parse(e):{}}catch(e){return{}}}function l(e,t){let s=i(),a=r(),n={};for(let r of a){if(e&&r.sportType!==e)continue;let a=s[r.id];if(a)for(let e of t?[t]:["male","female"])for(let t of a[e]){if("finished"!==t.status)continue;let e="".concat(t.name,"-").concat(t.team);n[e]||(n[e]={name:t.name,team:t.team,totalPoints:0,competitionCount:0,bestRank:1/0}),n[e].totalPoints+=t.points,n[e].competitionCount++,n[e].bestRank=Math.min(n[e].bestRank,t.rank)}}return Object.values(n).map(e=>({...e,bestRank:e.bestRank===1/0?0:e.bestRank})).sort((e,t)=>t.totalPoints-e.totalPoints)}function c(){let e=r(),t=i(),s=new Set,n=0,l=new Set;for(let a of e){l.add(a.sportType);let e=t[a.id];if(e)for(let t of[...e.male,...e.female])s.add("".concat(t.name,"-").concat(t.team)),n++}return{totalCompetitions:e.length,totalAthletes:s.size,totalResults:n,sportTypes:Array.from(l),lastImport:function(){try{return localStorage.getItem(a.LAST_IMPORT)}catch(e){return null}}()}}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=4213)}),_N_E=e.O()}]);