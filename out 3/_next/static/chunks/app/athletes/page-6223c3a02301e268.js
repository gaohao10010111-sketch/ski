(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3052],{900:function(e,t,n){Promise.resolve().then(n.bind(n,487))},9763:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let n=(0,s.forwardRef)((n,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...m}=n;return(0,s.createElement)("svg",{ref:i,...r,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:"lucide lucide-".concat(a(e)),...m},[...t.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...(Array.isArray(u)?u:[u])||[]])});return n.displayName="".concat(e),n}},2252:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5302:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2735:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},740:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3245:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6142:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]])},7168:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},525:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9474:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},2369:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var s=n(2972),r=n.n(s)},257:function(e,t,n){"use strict";var s,r;e.exports=(null==(s=n.g.process)?void 0:s.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,s,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var o=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?o=s.concat(o):d=-1,o.length&&m())}function m(){if(!c){var e=l(u);c=!0;for(var t=o.length;t;){for(s=o,o=[];++d<t;)s&&s[d].run();d=-1,t=o.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new p(e,t)),1!==o.length||c||l(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}},i=!0;try{t[e](a,a.exports,s),i=!1}finally{i&&delete n[e]}return a.exports}s.ab="//";var r=s(229);e.exports=r}()},487:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var s=n(7437),r=n(2265),a=n(3247),i=n(740),l=n(7168),o=n(2735),c=n(2369),d=n(9474),u=n(6142),m=n(525),p=n(5863),h=n(2252),x=n(9065),f=n(1837),g=n(4670),y=n(978),v=n(7648);let b={ALPINE_SKI:"高山滑雪",SNOWBOARD_SLOPESTYLE_BIGAIR:"单板坡障/大跳台",SNOWBOARD_PARALLEL:"单板平行项目",FREESTYLE_SLOPESTYLE_BIGAIR:"自由式坡障/大跳台"},N={ALPINE_SKI:"bg-blue-100 text-blue-800",SNOWBOARD_SLOPESTYLE_BIGAIR:"bg-purple-100 text-purple-800",SNOWBOARD_PARALLEL:"bg-green-100 text-green-800",FREESTYLE_SLOPESTYLE_BIGAIR:"bg-orange-100 text-orange-800"},w={ACTIVE:"活跃",INJURED:"伤病",RETIRED:"退役"},j={ACTIVE:"bg-green-100 text-green-800",INJURED:"bg-yellow-100 text-yellow-800",RETIRED:"bg-gray-100 text-gray-800"},k={alpine:"ALPINE_SKI","snowboard-slopestyle":"SNOWBOARD_SLOPESTYLE_BIGAIR","snowboard-parallel":"SNOWBOARD_PARALLEL","freestyle-slopestyle":"FREESTYLE_SLOPESTYLE_BIGAIR"},S=function(){let e=new Map;for(let t of y.Cm.competitions){let n=k[t.sportType]||"SNOWBOARD_SLOPESTYLE_BIGAIR";for(let s of t.events){let t=s.gender.includes("女")?"FEMALE":"MALE";for(let r of s.athletes){let a="".concat(r.name,"-").concat(r.team,"-").concat(s.discipline),i=e.get(a);i?(i.totalPoints+=r.points||0,i.bestRank=Math.min(i.bestRank,r.rank),i.competitions++):e.set(a,{name:r.name,team:r.team,sportType:n,discipline:s.discipline,totalPoints:r.points||0,bestRank:r.rank,competitions:1,gender:t})}}}return Array.from(e.values()).sort((e,t)=>t.totalPoints-e.totalPoints).map((e,t)=>({id:"static-".concat(t),name:e.name,gender:e.gender,sportType:e.sportType,status:"ACTIVE",province:e.team,club:e.discipline,currentPoints:e.totalPoints,currentRank:t+1,uSeriesGroup:null,birthDate:null,nationality:"CHN",fisCode:""}))}(),E=function(){let e=new Set;for(let t of y.Cm.competitions)for(let n of t.events)for(let t of n.athletes){let n="".concat(t.name,"-").concat(t.team);e.add(n)}return e.size}();function T(){var e,t,n,T;let[L,R]=(0,r.useState)(""),[A,C]=(0,r.useState)("all"),[O,I]=(0,r.useState)(!1),[P,Z]=(0,r.useState)(!0),[M,_]=(0,r.useState)(null),[B,D]=(0,r.useState)([]),[U,z]=(0,r.useState)(null),[G,W]=(0,r.useState)(1),[Y]=(0,r.useState)(50),[q,F]=(0,r.useState)(0),{showToast:J}=(0,x.p)(),[H,V]=(0,r.useState)("local"),[K,$]=(0,r.useState)(!1),[X,Q]=(0,r.useState)([]),ee=(0,r.useCallback)(()=>{let e=(0,g.Fw)(),t=(0,g.z$)();if(Q(t),0===e.length)return[];let n=e.map((e,n)=>{let s=t[0],r="SNOWBOARD_SLOPESTYLE_BIGAIR";return(null==s?void 0:s.sportType)&&(r=k[s.sportType]||"SNOWBOARD_SLOPESTYLE_BIGAIR"),{id:"local-athlete-".concat(n),name:e.name,gender:"MALE",sportType:r,status:"ACTIVE",province:e.team,club:null,currentPoints:e.totalPoints,currentRank:n+1,uSeriesGroup:null,birthDate:null,nationality:"CHN",fisCode:""}});if("all"!==A&&(n=n.filter(e=>e.sportType===A)),L){let e=L.toLowerCase();n=n.filter(t=>t.name.toLowerCase().includes(e)||t.province&&t.province.toLowerCase().includes(e))}return n},[A,L]),et=(0,r.useCallback)(async()=>{Z(!0),_(null);let e=ee();if(e.length>0){let t=(G-1)*Y,n=t+Y;D(e.slice(t,n)),F(e.length),$(!0),V("local"),Z(!1);return}if(S.length>0){let e=S;if("all"!==A&&(e=e.filter(e=>e.sportType===A)),L){let t=L.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.province&&e.province.toLowerCase().includes(t))}let t=(G-1)*Y,n=t+Y;D(e.slice(t,n)),F(e.length),$(!0),V("local"),Z(!1);return}try{let e=await f.NU.list({page:G,pageSize:Y,search:L||void 0,sportType:"all"!==A?A:void 0});if(e.success&&e.data&&Array.isArray(e.data)){var t;D(e.data),F((null===(t=e.meta)||void 0===t?void 0:t.total)||e.data.length),V("api"),$(!1)}else D([]),F(0),$(!1),V("api")}catch(e){D([]),F(0),$(!1)}finally{Z(!1)}},[G,Y,L,A,ee]),en=(0,r.useCallback)(async()=>{{let e=(0,g.ld)();if(e.totalCompetitions>0||e.totalAthletes>0){z({overview:{totalAthletes:e.totalAthletes,activeAthletes:e.totalAthletes,totalCompetitions:e.totalCompetitions,completedCompetitions:e.totalCompetitions,upcomingCompetitions:0,currentSeason:"2025-2026"},athletesBySport:[],recentCompetitions:[],topAthletes:[]});return}}if(S.length>0){z({overview:{totalAthletes:E,activeAthletes:E,totalCompetitions:y.Cm.competitions.length,completedCompetitions:y.Cm.competitions.filter(e=>"completed"===e.status).length,upcomingCompetitions:y.Cm.competitions.filter(e=>"upcoming"===e.status).length,currentSeason:"2025-2026"},athletesBySport:[],recentCompetitions:[],topAthletes:[]});return}try{let e=await f.aA.overview();e.success&&e.data&&z(e.data)}catch(e){}},[]);(0,r.useEffect)(()=>{et(),en()},[et,en]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{W(1)},300);return()=>clearTimeout(e)},[L,A]);let es=async()=>{if(0===B.length){J("没有数据可导出","warning");return}I(!0);try{let e=B.map(e=>[e.currentRank||"-",e.name,"MALE"===e.gender?"男":"女",b[e.sportType]||e.sportType,e.currentPoints||0,e.province||"-",e.club||"-",w[e.status]||e.status]),t=[["排名","姓名","性别","项目","积分","省份","俱乐部","状态"],...e].map(e=>e.join(",")).join("\n"),n=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download="运动员列表_".concat(new Date().toISOString().split("T")[0],".csv"),r.click(),URL.revokeObjectURL(s),J("成功导出 ".concat(B.length," 名运动员数据"),"success")}catch(e){J("导出失败，请重试","error")}finally{I(!1)}},er=Math.ceil(q/Y);return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"运动员管理"}),(0,s.jsx)("p",{className:"text-xl text-gray-600",children:"中国滑雪运动员档案与积分统计"})]}),(0,s.jsx)("div",{className:"sticky top-16 z-40 bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"搜索运动员姓名或省份...",value:L,onChange:e=>R(e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ski-blue transition-all"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,s.jsxs)("select",{value:A,onChange:e=>C(e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ski-blue transition-all",children:[(0,s.jsx)("option",{value:"all",children:"所有项目"}),(0,s.jsx)("option",{value:"ALPINE_SKI",children:"高山滑雪"}),(0,s.jsx)("option",{value:"FREESTYLE_SLOPESTYLE_BIGAIR",children:"自由式坡障/大跳台"}),(0,s.jsx)("option",{value:"SNOWBOARD_SLOPESTYLE_BIGAIR",children:"单板坡障/大跳台"}),(0,s.jsx)("option",{value:"SNOWBOARD_PARALLEL",children:"单板平行项目"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:["找到 ",(0,s.jsx)("span",{className:"text-ski-blue font-bold",children:q})," 名运动员"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:et,disabled:P,className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",title:"刷新数据",children:(0,s.jsx)(l.Z,{className:"h-4 w-4 ".concat(P?"animate-spin":"")})}),(0,s.jsxs)("button",{onClick:es,disabled:O||0===B.length,className:"bg-ski-blue text-white px-4 py-2 rounded-md hover:bg-ski-blue/90 transition-colors shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),O?"导出中...":"导出列表"]})]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,s.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:null!==(e=null==U?void 0:U.overview.totalAthletes)&&void 0!==e?e:"-"}),(0,s.jsx)("div",{className:"text-gray-600",children:"注册运动员"})]})]})}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,s.jsx)(d.Z,{className:"h-6 w-6 text-green-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:null!==(t=null==U?void 0:U.overview.activeAthletes)&&void 0!==t?t:"-"}),(0,s.jsx)("div",{className:"text-gray-600",children:"活跃运动员"})]})]})}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,s.jsx)(u.Z,{className:"h-6 w-6 text-purple-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:null!==(n=null==U?void 0:U.overview.completedCompetitions)&&void 0!==n?n:"-"}),(0,s.jsx)("div",{className:"text-gray-600",children:"已完成比赛"})]})]})}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"bg-red-100 p-3 rounded-full",children:(0,s.jsx)(m.Z,{className:"h-6 w-6 text-red-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:null!==(T=null==U?void 0:U.overview.currentSeason)&&void 0!==T?T:"-"}),(0,s.jsx)("div",{className:"text-gray-600",children:"当前赛季"})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"运动员列表"})}),P&&(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)(p.Z,{className:"h-8 w-8 animate-spin text-ski-blue"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:"加载中..."})]}),M&&!P&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(h.Z,{className:"h-12 w-12 text-red-500 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:M}),(0,s.jsx)("button",{onClick:et,className:"bg-ski-blue text-white px-4 py-2 rounded-md hover:bg-ski-blue/90",children:"重试"})]}),!P&&!M&&0===B.length&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"暂无运动员数据"})]}),!P&&!M&&B.length>0&&(0,s.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-30",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"排名"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"运动员"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"项目"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"积分"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"省份/俱乐部"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"状态"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:"操作"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(1===e.currentRank?"bg-yellow-100 text-yellow-800":2===e.currentRank?"bg-gray-100 text-gray-800":3===e.currentRank?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:e.currentRank||"-"})})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"h-6 w-6 text-gray-600"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["MALE"===e.gender?"男":"女",e.uSeriesGroup&&" \xb7 ".concat(e.uSeriesGroup)]})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(N[e.sportType]||"bg-gray-100 text-gray-800"),children:b[e.sportType]||e.sportType})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(null===(t=e.currentPoints)||void 0===t?void 0:t.toFixed(2))||"-"}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[(0,s.jsx)("div",{children:e.province||"-"}),e.club&&(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.club})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(j[e.status]||"bg-gray-100 text-gray-800"),children:w[e.status]||e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsx)(v.default,{href:"/athletes/".concat(e.id),className:"text-ski-blue hover:text-ski-blue/80 font-medium",children:"查看详情"})})]},e.id)})})]})})]}),!P&&!M&&B.length>0&&(0,s.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-6 rounded-lg shadow-md",children:[(0,s.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,s.jsx)("button",{onClick:()=>W(e=>Math.max(1,e-1)),disabled:1===G,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"上一页"}),(0,s.jsx)("button",{onClick:()=>W(e=>Math.min(er,e+1)),disabled:G>=er,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"下一页"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["显示第 ",(0,s.jsx)("span",{className:"font-medium",children:(G-1)*Y+1})," 到"," ",(0,s.jsx)("span",{className:"font-medium",children:Math.min(G*Y,q)})," 条， 共 ",(0,s.jsx)("span",{className:"font-medium",children:q})," 条结果"]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,s.jsx)("button",{onClick:()=>W(e=>Math.max(1,e-1)),disabled:1===G,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"上一页"}),Array.from({length:Math.min(5,er)},(e,t)=>{let n;return n=er<=5?t+1:G<=3?t+1:G>=er-2?er-4+t:G-2+t,(0,s.jsx)("button",{onClick:()=>W(n),className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium ".concat(G===n?"z-10 bg-ski-blue border-ski-blue text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:n},n)}),(0,s.jsx)("button",{onClick:()=>W(e=>Math.min(er,e+1)),disabled:G>=er,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"下一页"})]})})]})]})]})})}},9065:function(e,t,n){"use strict";n.d(t,{V:function(){return m},p:function(){return u}});var s=n(7437),r=n(2265),a=n(5302),i=n(2252),l=n(3639),o=n(3245),c=n(2489);let d=(0,r.createContext)(void 0);function u(){let e=(0,r.useContext)(d);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function m(e){let{children:t}=e,[n,a]=(0,r.useState)([]),i=(0,r.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),l=(0,r.useRef)(new Map),o=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,s="toast-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),r={id:s,message:e,type:t,duration:n};if(a(e=>[...e,r]),n>0){let e=setTimeout(()=>{i(s),l.current.delete(s)},n);l.current.set(s,e)}},[i]);return(0,r.useEffect)(()=>{let e=l.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear()}},[]),(0,s.jsxs)(d.Provider,{value:{showToast:o,hideToast:i},children:[t,(0,s.jsx)(p,{toasts:n,onClose:i})]})}function p(e){let{toasts:t,onClose:n}=e;return 0===t.length?null:(0,s.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(e=>(0,s.jsx)(h,{toast:e,onClose:n},e.id))})}function h(e){let{toast:t,onClose:n}=e,r={success:(0,s.jsx)(a.Z,{className:"w-5 h-5 text-green-500"}),error:(0,s.jsx)(i.Z,{className:"w-5 h-5 text-red-500"}),warning:(0,s.jsx)(l.Z,{className:"w-5 h-5 text-yellow-500"}),info:(0,s.jsx)(o.Z,{className:"w-5 h-5 text-blue-500"})};return(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-lg border shadow-lg animate-slide-in ".concat({success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",warning:"bg-yellow-50 border-yellow-200",info:"bg-blue-50 border-blue-200"}[t.type]),role:"alert",children:[r[t.type],(0,s.jsx)("p",{className:"flex-1 text-sm text-gray-700 whitespace-pre-line",children:t.message}),(0,s.jsx)("button",{onClick:()=>n(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]})}},1837:function(e,t,n){"use strict";n.d(t,{MH:function(){return l},NU:function(){return i},W2:function(){return o},aA:function(){return c}});let s=n(257).env.NEXT_PUBLIC_API_URL||"";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(s).concat(e),r={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(n,r),t=await e.json();if(!e.ok)return{success:!1,error:t.error||{code:"REQUEST_ERROR",message:"请求失败"}};return t}catch(e){return{success:!1,error:{code:"NETWORK_ERROR",message:"网络错误，请检查网络连接"}}}}function a(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[n,s]=e;null!=s&&""!==s&&t.append(n,String(s))});let n=t.toString();return n?"?".concat(n):""}let i={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r("/api/athletes".concat(a(e)))},get:e=>r("/api/athletes/".concat(e)),create:e=>r("/api/athletes",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>r("/api/athletes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>r("/api/athletes/".concat(e),{method:"DELETE"}),getPoints:e=>r("/api/athletes/".concat(e,"/points"))},l={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r("/api/competitions".concat(a(e)))},get:e=>r("/api/competitions/".concat(e)),create:e=>r("/api/competitions",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>r("/api/competitions/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>r("/api/competitions/".concat(e),{method:"DELETE"}),getResults:e=>r("/api/competitions/".concat(e,"/results")),addResult:(e,t)=>r("/api/competitions/".concat(e,"/results"),{method:"POST",body:JSON.stringify(t)})},o={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r("/api/rankings".concat(a(e)))}},c={overview:()=>r("/api/stats/overview")}},4670:function(e,t,n){"use strict";n.d(t,{Fw:function(){return l},T2:function(){return r},ld:function(){return o},z$:function(){return a}});let s={COMPETITIONS:"ski-competitions",RESULTS:"ski-results",LAST_IMPORT:"ski-last-import"};function r(e){try{let t=a(),n=t.findIndex(t=>t.id===e.competition.id);n>=0?t[n]=e.competition:t.unshift(e.competition),localStorage.setItem(s.COMPETITIONS,JSON.stringify(t));let r=i();return r[e.competition.id]=e.results,localStorage.setItem(s.RESULTS,JSON.stringify(r)),localStorage.setItem(s.LAST_IMPORT,new Date().toISOString()),!0}catch(e){return!1}}function a(){try{let e=localStorage.getItem(s.COMPETITIONS);return e?JSON.parse(e):[]}catch(e){return[]}}function i(){try{let e=localStorage.getItem(s.RESULTS);return e?JSON.parse(e):{}}catch(e){return{}}}function l(e,t){let n=i(),s=a(),r={};for(let a of s){if(e&&a.sportType!==e)continue;let s=n[a.id];if(s)for(let e of t?[t]:["male","female"])for(let t of s[e]){if("finished"!==t.status)continue;let e="".concat(t.name,"-").concat(t.team);r[e]||(r[e]={name:t.name,team:t.team,totalPoints:0,competitionCount:0,bestRank:1/0}),r[e].totalPoints+=t.points,r[e].competitionCount++,r[e].bestRank=Math.min(r[e].bestRank,t.rank)}}return Object.values(r).map(e=>({...e,bestRank:e.bestRank===1/0?0:e.bestRank})).sort((e,t)=>t.totalPoints-e.totalPoints)}function o(){let e=a(),t=i(),n=new Set,r=0,l=new Set;for(let s of e){l.add(s.sportType);let e=t[s.id];if(e)for(let t of[...e.male,...e.female])n.add("".concat(t.name,"-").concat(t.team)),r++}return{totalCompetitions:e.length,totalAthletes:n.size,totalResults:r,sportTypes:Array.from(l),lastImport:function(){try{return localStorage.getItem(s.LAST_IMPORT)}catch(e){return null}}()}}}},function(e){e.O(0,[2972,978,2971,2117,1744],function(){return e(e.s=900)}),_N_E=e.O()}]);