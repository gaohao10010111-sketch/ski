(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{3955:function(e,t,s){Promise.resolve().then(s.t.bind(s,8003,23)),Promise.resolve().then(s.t.bind(s,2778,23)),Promise.resolve().then(s.bind(s,8133)),Promise.resolve().then(s.bind(s,488)),Promise.resolve().then(s.bind(s,2114)),Promise.resolve().then(s.bind(s,2834)),Promise.resolve().then(s.bind(s,5335)),Promise.resolve().then(s.bind(s,2153))},8133:function(e,t,s){"use strict";s.d(t,{default:function(){return l}});var r=s(2265),a=s(9376);let n="ski_session_id",i="ski_visit_id";function l(){let e=(0,a.usePathname)(),t=(0,r.useRef)(null),s=(0,r.useRef)(Date.now()),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(window.location.hostname.includes("github.io"))return;let r=localStorage.getItem(n);r||(r=null);let a=async()=>{if(!1!==l.current)try{let s=window.location.pathname.startsWith("/ski")?"/ski":"",a=await fetch("".concat(s,"/api/analytics"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,referrer:document.referrer||null,screenWidth:window.screen.width,screenHeight:window.screen.height,sessionId:r})}),o=a.headers.get("content-type");if(!o||!o.includes("application/json")){l.current=!1;return}let c=await a.json();c.success&&c.sessionId&&(l.current=!0,localStorage.setItem(n,c.sessionId),t.current=c.id,sessionStorage.setItem(i,c.id))}catch(e){l.current=!1}},o=async()=>{if(!1===l.current)return;let e=t.current||sessionStorage.getItem(i);if(!e)return;let r=Math.round((Date.now()-s.current)/1e3);if(!(r<1))try{let t=window.location.pathname.startsWith("/ski")?"/ski":"";await fetch("".concat(t,"/api/analytics"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,duration:r}),keepalive:!0})}catch(e){}};s.current=Date.now(),a();let c=()=>{"hidden"===document.visibilityState&&o()},d=()=>{o()};return document.addEventListener("visibilitychange",c),window.addEventListener("beforeunload",d),()=>{document.removeEventListener("visibilitychange",c),window.removeEventListener("beforeunload",d),o()}},[e]),null}},488:function(e,t,s){"use strict";s.d(t,{default:function(){return i}});var r=s(7437),a=s(8667);let n=s(257).env.NEXT_PUBLIC_BAIDU_ANALYTICS_ID||"";function i(){return n?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.default,{id:"baidu-analytics",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:'\n            var _hmt = _hmt || [];\n            (function() {\n              var hm = document.createElement("script");\n              hm.src = "https://hm.baidu.com/hm.js?'.concat(n,'";\n              var s = document.getElementsByTagName("script")[0];\n              s.parentNode.insertBefore(hm, s);\n            })();\n          ')}})}):null}},2114:function(e,t,s){"use strict";s.d(t,{ClientProviders:function(){return l}});var r=s(7437),a=s(3671),n=s(3190),i=s(9065);function l(e){let{children:t}=e;return(0,r.jsx)(n.i,{children:(0,r.jsx)(a.H,{children:(0,r.jsx)(i.V,{children:t})})})}},2834:function(e,t,s){"use strict";s.d(t,{default:function(){return u}});var r=s(7437),a=s(2265),n=s(7648),i=s(7737),l=s(4480);function o(e){let{partner:t,label:s,showLabel:n=!0}=e,[i,l]=(0,a.useState)("/ski"),[o,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l(window.location.pathname.startsWith("/ski")?"/ski":"")},[]);let d=t.logo&&!t.logo.includes("placeholder"),u=d?"".concat(i).concat(t.logo):"",h=(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[n&&(0,r.jsx)("span",{className:"text-xs text-gray-400 mb-2",children:s}),!n&&(0,r.jsx)("span",{className:"text-xs text-gray-400 mb-2 invisible",children:s}),(0,r.jsx)("div",{className:"bg-white rounded-xl w-[140px] h-[70px] flex items-center justify-center hover:scale-105 transition-transform shadow-sm",children:d&&!o?(0,r.jsx)("img",{src:u,alt:t.name,className:"h-[50px] w-auto max-w-[120px] object-contain",onError:()=>c(!0)}):(0,r.jsx)("span",{className:"text-sm text-gray-700 font-semibold whitespace-nowrap",children:t.name})})]});return(0,r.jsx)("span",{className:"inline-flex items-center",title:t.name,children:h})}function c(){let[e,t]=(0,a.useState)("/ski");return(0,a.useEffect)(()=>{t(window.location.pathname.startsWith("/ski")?"/ski":"")},[]),(0,r.jsx)("div",{className:"border-t border-gray-700 pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-4",children:"U系列赛事报名平台"}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4 sm:gap-6",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"bg-white p-1 sm:p-1.5 rounded-lg",children:(0,r.jsx)("img",{src:"".concat(e,"/images/huacool-logo.png"),alt:"滑cool",className:"h-12 w-12 sm:h-14 sm:w-14 object-contain"})}),(0,r.jsx)("span",{className:"text-xs text-gray-400 mt-1.5",children:"滑cool"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"bg-white p-1 sm:p-1.5 rounded-lg",children:(0,r.jsx)("img",{src:"".concat(e,"/images/huacool-qrcode.jpg"),alt:"滑cool小程序二维码",className:"h-12 w-12 sm:h-14 sm:w-14 object-contain"})}),(0,r.jsx)("span",{className:"text-xs text-gray-400 mt-1.5",children:"扫码进入小程序"})]})]})]})})}function d(e){let{partner:t}=e,[s,n]=(0,a.useState)("/ski"),[i,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n(window.location.pathname.startsWith("/ski")?"/ski":"")},[]);let o=t.logo&&!t.logo.includes("placeholder"),c=o?"".concat(s).concat(t.logo):"",d=o&&!i?(0,r.jsx)("img",{src:c,alt:t.name,className:"h-12 w-auto max-w-[140px] object-contain bg-white rounded px-2 py-1 hover:scale-105 transition-transform",onError:()=>l(!0)}):(0,r.jsx)("span",{className:"text-xs text-gray-400 px-2 py-1 border border-gray-600 rounded whitespace-nowrap",children:t.name});return(0,r.jsx)("span",{className:"inline-flex items-center",title:t.name,children:d})}function u(){let e=[],t=new Set;Object.values(l.commonPartners).forEach(s=>{t.has(s.id)||(t.add(s.id),e.push(s))}),Object.values(l.brandPartners).forEach(s=>{t.has(s.id)||(t.add(s.id),e.push(s))}),Object.values(l.resortPartners).forEach(s=>{t.has(s.id)||(t.add(s.id),e.push(s))});let s=e.filter(e=>"brand"===e.type||"resort"===e.type);return(0,r.jsx)("footer",{className:"bg-ski-navy text-white",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"col-span-1 md:col-span-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,r.jsx)(i.Z,{className:"h-8 w-8 text-primary-400"}),(0,r.jsx)("span",{className:"text-xl font-bold",children:"中国滑雪青少年积分排名官方平台"})]}),(0,r.jsx)("p",{className:"text-gray-300 text-sm max-w-2xl leading-relaxed",children:"基于官方标准打造的综合性竞赛管理平台，涵盖高山滑雪、自由式滑雪、单板滑雪全项目，采用符合中国标准的多档积分计算算法，为中国滑雪竞赛提供权威、准确的数据管理和积分计算服务。"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"积分系统"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:"/points/rankings",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分排行榜"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:"/results-announcement",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"最新成绩"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"赛事管理"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:"/competitions",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"比赛成绩"})}),(0,r.jsx)("li",{children:(0,r.jsx)(n.default,{href:"/competitions/schedule",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"赛程安排"})})]})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-700 mt-8 pt-8",children:(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end justify-center gap-8 mb-8",children:[(0,r.jsx)(o,{partner:l.commonPartners.csa,label:"U系列赛事主办单位"}),(0,r.jsx)(o,{partner:l.commonPartners.huati,label:"U系列赛事承办单位"})]})})}),s.length>0&&(0,r.jsx)("div",{className:"border-t border-gray-700 pt-6",children:(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-4",children:"U系列赛事合作伙伴"}),(0,r.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-4",children:s.map(e=>(0,r.jsx)(d,{partner:e},e.id))})]})}),(0,r.jsx)(c,{}),(0,r.jsx)("div",{className:"border-t border-gray-700 mt-8 pt-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,r.jsx)("div",{className:"text-sm text-gray-300 mb-4 md:mb-0",children:"\xa9 2025-2028 全国滑雪青少年U系列赛事积分排名指定官方发布平台"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm",children:[(0,r.jsx)(n.default,{href:"/about",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"关于平台"}),(0,r.jsx)(n.default,{href:"/cooperation",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"合作咨询"})]})]})})]})})}},5335:function(e,t,s){"use strict";s.d(t,{default:function(){return y}});var r=s(7437),a=s(7648),n=s(9376),i=s(2265),l=s(3245),o=s(5005),c=s(7737),d=s(9474),u=s(1047),h=s(5805),m=s(2489),x=s(6840),p=s(875),g=s(3247),E=s(3671),f=s(3190),N=s(4480);function y(){var e,t,s,y,v,b,T,w,A;let[S,j]=(0,i.useState)(!1),[I,R]=(0,i.useState)(!1),[O,D]=(0,i.useState)(null),[P,k]=(0,i.useState)("/ski"),C=(0,n.usePathname)();(0,n.useRouter)();let{user:_,logout:L,isLoading:U}=(0,E.a)(),{t:M,language:H}=(0,f.$)();(0,i.useEffect)(()=>{k(window.location.pathname.startsWith("/ski")?"/ski":"")},[]),(0,i.useEffect)(()=>{let e=e=>{e.target.closest("[data-dropdown-container]")||D(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let W=(null==C?void 0:C.startsWith("/alpine"))?"alpine":(null==C?void 0:C.startsWith("/snowboard-slopestyle"))?"snowboard-slopestyle":(null==C?void 0:C.startsWith("/snowboard-parallel"))?"snowboard-parallel":(null==C?void 0:C.startsWith("/freestyle-slopestyle"))?"freestyle-slopestyle":null,G=()=>{var e,t,s,r,a;switch(W){case"alpine":return(null===(e=M.navigation)||void 0===e?void 0:e.alpine)||"Alpine Skiing";case"snowboard-slopestyle":return(null===(t=M.navigation)||void 0===t?void 0:t.snowboardSlopestyle)||"Snowboard Slopestyle";case"snowboard-parallel":return(null===(s=M.navigation)||void 0===s?void 0:s.snowboardParallel)||"Snowboard Parallel";case"freestyle-slopestyle":return(null===(r=M.navigation)||void 0===r?void 0:r.freestyleSlopestyle)||"Freestyle Slopestyle";default:return(null===(a=M.navigation)||void 0===a?void 0:a.disciplines)||"Disciplines"}},Z=[{key:"about",name:(null===(e=M.navigation)||void 0===e?void 0:e.about)||"About",href:"/about",icon:l.Z},{key:"cooperation",name:"合作咨询",href:"/cooperation",icon:o.Z}],z=[{key:"disciplines",name:(null===(t=M.navigation)||void 0===t?void 0:t.disciplines)||"Disciplines",href:"#",icon:c.Z,highlighted:!0,children:[{key:"alpine",name:(null===(s=M.navigation)||void 0===s?void 0:s.alpine)||"Alpine Skiing",href:"/alpine"},{key:"snowboard-slopestyle",name:(null===(y=M.navigation)||void 0===y?void 0:y.snowboardSlopestyle)||"Snowboard Slopestyle",href:"/snowboard-slopestyle"},{key:"snowboard-parallel",name:(null===(v=M.navigation)||void 0===v?void 0:v.snowboardParallel)||"Snowboard Parallel",href:"/snowboard-parallel"},{key:"freestyle-slopestyle",name:(null===(b=M.navigation)||void 0===b?void 0:b.freestyleSlopestyle)||"Freestyle Slopestyle",href:"/freestyle-slopestyle"}]},{key:"points-rankings",name:"积分排行榜",href:"/points/rankings",icon:d.Z},{key:"results",name:"比赛成绩",href:"/competitions",icon:d.Z},{key:"schedule",name:"赛程",href:"/competitions/schedule",icon:u.Z},{key:"athletes",name:"运动员名录",href:"/athletes",icon:h.Z}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"max-w-[1440px] mx-auto px-6 sm:px-10 md:px-20 xl:px-[120px]",children:(0,r.jsxs)("div",{className:"flex justify-between h-14",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(a.default,{href:"/",className:"flex items-center space-x-2 hover:opacity-90 transition-opacity",children:[(0,r.jsx)(c.Z,{className:"h-6 w-6 text-ski-blue"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-base lg:text-lg font-bold text-ski-navy leading-tight",children:"zh"===H?(null===(T=M.navigation)||void 0===T?void 0:T.title)||"中国滑雪青少年积分排名官方平台":(null===(w=M.navigation)||void 0===w?void 0:w.titleShort)||"China Ski Points"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"www.cnskipoints.com"})]})]})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("a",{href:N.commonPartners.csa.url,target:"_blank",rel:"noopener noreferrer",title:"中国滑雪协会",className:"hover:opacity-80 transition-opacity",children:(0,r.jsx)("img",{src:"".concat(P).concat(N.commonPartners.csa.logo),alt:"中国滑雪协会",className:"h-10 w-auto object-contain"})}),(0,r.jsx)("a",{href:N.commonPartners.huati.url,target:"_blank",rel:"noopener noreferrer",title:"华体冰雪",className:"hover:opacity-80 transition-opacity",children:(0,r.jsx)("img",{src:"".concat(P).concat(N.commonPartners.huati.logo),alt:"华体冰雪",className:"h-14 w-auto object-contain"})})]}),(0,r.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,r.jsx)("div",{className:"flex items-center space-x-3",children:Z.map(e=>{let t=(null==C?void 0:C.startsWith(e.href))&&"#"!==e.href,s=e.icon;return(0,r.jsxs)(a.default,{href:e.href,className:"flex items-center gap-1.5 px-4 py-2 rounded text-sm font-medium transition-colors ".concat(e.highlighted?"bg-blue-600 text-white hover:bg-blue-700 shadow-sm":t?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"),children:[s&&(0,r.jsx)(s,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:e.name})]},e.key)})})]}),(0,r.jsx)("div",{className:"md:hidden flex items-center space-x-1.5",children:(0,r.jsx)("button",{onClick:()=>j(!S),className:"text-gray-700 hover:text-ski-blue p-1.5",children:S?(0,r.jsx)(m.Z,{className:"h-5 w-5"}):(0,r.jsx)(x.Z,{className:"h-5 w-5"})})})]})})}),(0,r.jsx)("nav",{className:"bg-gray-50 border-b border-gray-200 sticky top-14 z-40",children:(0,r.jsx)("div",{className:"max-w-[1440px] mx-auto px-6 sm:px-10 md:px-20 xl:px-[120px]",children:(0,r.jsxs)("div",{className:"hidden md:flex items-center justify-end space-x-2 h-10",children:[z.map(e=>{var t,s;let n="#"!==e.href&&(C===e.href||(null==C?void 0:C.startsWith(e.href))),i=!!(null===(t=e.children)||void 0===t?void 0:t.length),l=e.icon,o="disciplines"===e.key,c="secondary-".concat(e.key);return(0,r.jsx)("div",{className:"relative ".concat(e.highlighted&&o?"pr-2 mr-2 border-r border-gray-300":""),"data-dropdown-container":i?"true":void 0,children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{className:"flex items-center gap-1 px-3 py-1.5 rounded text-xs font-medium transition-colors whitespace-nowrap ".concat(e.highlighted?"bg-ski-blue text-white hover:bg-ski-blue/90 shadow-sm":n?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-100"),onClick:e=>{e.preventDefault(),D(O===c?null:c)},children:[l&&(0,r.jsx)(l,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:o?G():e.name}),(0,r.jsx)(p.Z,{className:"w-2.5 h-2.5"})]}),O===c&&(0,r.jsx)("div",{className:"absolute left-0 top-full pt-2 z-50",children:(0,r.jsx)("div",{className:"w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1",children:null===(s=e.children)||void 0===s?void 0:s.map(e=>(0,r.jsx)(a.default,{href:e.href,onClick:()=>D(null),className:"block px-4 py-2 text-sm transition-colors ".concat(C===e.href?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50 hover:text-blue-600"),children:e.name},e.key))})})]}):(0,r.jsxs)(a.default,{href:e.href,className:"flex items-center gap-1 px-3 py-1.5 rounded text-xs font-medium transition-colors whitespace-nowrap ".concat(n?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-100"),children:[l&&(0,r.jsx)(l,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:e.name})]})},e.key)}),(0,r.jsx)("button",{className:"flex items-center justify-center p-1.5 rounded text-gray-700 hover:text-blue-600 hover:bg-gray-100 transition-colors","aria-label":(null===(A=M.common)||void 0===A?void 0:A.search)||"Search",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})})]})})}),S&&(0,r.jsx)("div",{className:"md:hidden bg-white border-b border-gray-100 fixed top-14 left-0 right-0 z-40 shadow-lg",children:(0,r.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[(0,r.jsx)("div",{className:"border-b border-gray-200 pb-2 mb-2",children:Z.map(e=>{let t=e.icon;return(0,r.jsxs)(a.default,{href:e.href,className:"flex items-center gap-2 px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ski-blue hover:bg-gray-50",onClick:()=>j(!1),children:[t&&(0,r.jsx)(t,{className:"w-4 h-4"}),e.name]},e.key)})}),z.map(e=>{var t,s;let n=e.icon;return(null===(t=e.children)||void 0===t?void 0:t.length)?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"px-3 py-2 text-sm font-semibold text-gray-500 uppercase tracking-wider",children:e.name}),(0,r.jsx)("div",{className:"ml-4 space-y-1",children:null===(s=e.children)||void 0===s?void 0:s.map(e=>(0,r.jsx)(a.default,{href:e.href,className:"block px-3 py-2 rounded-md text-sm text-gray-600 hover:text-ski-blue hover:bg-gray-50",onClick:()=>j(!1),children:e.name},e.key))})]},e.key):(0,r.jsxs)(a.default,{href:e.href,className:"flex items-center gap-2 px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ski-blue hover:bg-gray-50",onClick:()=>j(!1),children:[n&&(0,r.jsx)(n,{className:"w-4 h-4"}),e.name]},e.key)})]})})]})}},2153:function(e,t,s){"use strict";s.d(t,{default:function(){return i}});var r=s(7437),a=s(2265),n=s(9376);function i(){let e=(0,n.usePathname)(),t=(0,n.useSearchParams)(),[s,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(0);return((0,a.useEffect)(()=>{i(!1),o(100);let e=setTimeout(()=>o(0),200);return()=>clearTimeout(e)},[e,t]),(0,a.useEffect)(()=>{let t=t=>{let s=t.target.closest("a");if(s&&s.href&&!s.href.startsWith("#")&&!s.target&&!s.download&&s.origin===window.location.origin&&s.pathname!==e){i(!0),o(30);let e=setInterval(()=>{o(t=>t>=90?(clearInterval(e),90):t+10)},100);return()=>clearInterval(e)}};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[e]),0===l)?null:(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 z-[100] h-1 bg-transparent",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-ski-blue to-blue-400 transition-all duration-200 ease-out shadow-sm",style:{width:"".concat(l,"%"),opacity:s?1:0}})})}},9065:function(e,t,s){"use strict";s.d(t,{V:function(){return h},p:function(){return u}});var r=s(7437),a=s(2265),n=s(5302),i=s(2252),l=s(3639),o=s(3245),c=s(2489);let d=(0,a.createContext)(void 0);function u(){let e=(0,a.useContext)(d);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function h(e){let{children:t}=e,[s,n]=(0,a.useState)([]),i=(0,a.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),l=(0,a.useRef)(new Map),o=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,r="toast-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),a={id:r,message:e,type:t,duration:s};if(n(e=>[...e,a]),s>0){let e=setTimeout(()=>{i(r),l.current.delete(r)},s);l.current.set(r,e)}},[i]);return(0,a.useEffect)(()=>{let e=l.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear()}},[]),(0,r.jsxs)(d.Provider,{value:{showToast:o,hideToast:i},children:[t,(0,r.jsx)(m,{toasts:s,onClose:i})]})}function m(e){let{toasts:t,onClose:s}=e;return 0===t.length?null:(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(e=>(0,r.jsx)(x,{toast:e,onClose:s},e.id))})}function x(e){let{toast:t,onClose:s}=e,a={success:(0,r.jsx)(n.Z,{className:"w-5 h-5 text-green-500"}),error:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-red-500"}),warning:(0,r.jsx)(l.Z,{className:"w-5 h-5 text-yellow-500"}),info:(0,r.jsx)(o.Z,{className:"w-5 h-5 text-blue-500"})};return(0,r.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-lg border shadow-lg animate-slide-in ".concat({success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",warning:"bg-yellow-50 border-yellow-200",info:"bg-blue-50 border-blue-200"}[t.type]),role:"alert",children:[a[t.type],(0,r.jsx)("p",{className:"flex-1 text-sm text-gray-700 whitespace-pre-line",children:t.message}),(0,r.jsx)("button",{onClick:()=>s(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]})}},3671:function(e,t,s){"use strict";s.d(t,{H:function(){return E},a:function(){return f}});var r,a,n,i,l,o,c,d,u=s(7437),h=s(2265);(r=l||(l={})).PUBLIC="public",r.ATHLETE="athlete",r.COACH="coach",r.ADMIN="admin",(a=o||(o={})).ACTIVE="active",a.INACTIVE="inactive",a.PENDING="pending",(n=c||(c={})).HOME="home",n.ABOUT="about",n.NEWS="news",n.CONTACT="contact",n.PROFILE="profile",n.MY_POINTS="my_points",n.POINTS_QUERY="points_query",n.POINTS_RANKING="points_ranking",n.POINTS_CALCULATOR="points_calculator",n.POINTS_TRENDS="points_trends",n.RULES_POINTS="rules_points",n.COMPETITIONS="competitions",n.COMPETITIONS_SCHEDULE="competitions_schedule",n.RESULTS_IMPORT="results_import",n.RESULTS_ANNOUNCEMENT="results_announcement",n.REGISTRATION="registration",n.EVENTS="events",n.ADMIN_DASHBOARD="admin_dashboard",n.POINTS_CALCULATION="points_calculation",n.USER_MANAGEMENT="user_management",n.STATISTICS="statistics",n.SYSTEM_CONFIG="system_config",(i=d||(d={})).READ="read",i.WRITE="write",i.DELETE="delete",i.UPDATE="update";let m={[l.PUBLIC]:{[c.HOME]:[d.READ],[c.ABOUT]:[d.READ],[c.NEWS]:[d.READ],[c.CONTACT]:[d.READ],[c.RULES_POINTS]:[d.READ],[c.COMPETITIONS]:[d.READ],[c.COMPETITIONS_SCHEDULE]:[d.READ],[c.RESULTS_ANNOUNCEMENT]:[d.READ]},[l.ATHLETE]:{[c.HOME]:[d.READ],[c.ABOUT]:[d.READ],[c.NEWS]:[d.READ],[c.CONTACT]:[d.READ],[c.PROFILE]:[d.READ,d.UPDATE],[c.MY_POINTS]:[d.READ],[c.POINTS_QUERY]:[d.READ],[c.POINTS_RANKING]:[d.READ],[c.POINTS_CALCULATOR]:[d.READ],[c.POINTS_TRENDS]:[d.READ],[c.RULES_POINTS]:[d.READ],[c.COMPETITIONS]:[d.READ],[c.COMPETITIONS_SCHEDULE]:[d.READ],[c.REGISTRATION]:[d.READ,d.WRITE],[c.EVENTS]:[d.READ,d.WRITE]},[l.COACH]:{[c.HOME]:[d.READ],[c.ABOUT]:[d.READ],[c.NEWS]:[d.READ],[c.CONTACT]:[d.READ],[c.PROFILE]:[d.READ,d.UPDATE],[c.MY_POINTS]:[d.READ],[c.POINTS_QUERY]:[d.READ],[c.POINTS_RANKING]:[d.READ],[c.POINTS_CALCULATOR]:[d.READ],[c.POINTS_TRENDS]:[d.READ],[c.RULES_POINTS]:[d.READ],[c.COMPETITIONS]:[d.READ],[c.COMPETITIONS_SCHEDULE]:[d.READ],[c.REGISTRATION]:[d.READ,d.WRITE],[c.EVENTS]:[d.READ,d.WRITE]},[l.ADMIN]:{[c.HOME]:[d.READ],[c.ABOUT]:[d.READ,d.UPDATE],[c.NEWS]:[d.READ,d.WRITE,d.UPDATE,d.DELETE],[c.CONTACT]:[d.READ,d.UPDATE],[c.PROFILE]:[d.READ,d.UPDATE],[c.MY_POINTS]:[d.READ],[c.POINTS_QUERY]:[d.READ],[c.POINTS_RANKING]:[d.READ],[c.POINTS_CALCULATOR]:[d.READ],[c.POINTS_TRENDS]:[d.READ],[c.RULES_POINTS]:[d.READ,d.UPDATE],[c.COMPETITIONS]:[d.READ,d.WRITE,d.UPDATE,d.DELETE],[c.COMPETITIONS_SCHEDULE]:[d.READ,d.WRITE,d.UPDATE],[c.RESULTS_IMPORT]:[d.READ,d.WRITE],[c.RESULTS_ANNOUNCEMENT]:[d.READ,d.WRITE],[c.REGISTRATION]:[d.READ,d.WRITE,d.UPDATE,d.DELETE],[c.EVENTS]:[d.READ,d.WRITE,d.UPDATE,d.DELETE],[c.ADMIN_DASHBOARD]:[d.READ],[c.POINTS_CALCULATION]:[d.READ,d.WRITE,d.UPDATE],[c.USER_MANAGEMENT]:[d.READ,d.WRITE,d.UPDATE,d.DELETE],[c.STATISTICS]:[d.READ],[c.SYSTEM_CONFIG]:[d.READ,d.UPDATE]}},x=(e,t)=>{switch(t.type){case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_FAILURE":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};case"CLEAR_ERROR":return{...e,error:null};default:return e}},p={user:null,isAuthenticated:!1,isLoading:!1,error:null},g=(0,h.createContext)(void 0);function E(e){let{children:t}=e,[s,r]=(0,h.useReducer)(x,p),a=async e=>{r({type:"SET_LOADING",payload:!0});try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.email,password:e.password})}),s=await t.json();if(!t.ok)throw Error(s.error||"登录失败");let a={USER:l.ATHLETE,ATHLETE:l.ATHLETE,COACH:l.COACH,ADMIN:l.ADMIN},n={id:s.user.id,username:s.user.username,email:s.user.email,name:s.user.name,role:a[s.user.role]||l.ATHLETE,status:o.ACTIVE,createdAt:new Date,lastLoginAt:new Date};try{localStorage.setItem("auth_token",s.token),localStorage.setItem("auth_user",JSON.stringify(n))}catch(e){}r({type:"LOGIN_SUCCESS",payload:n})}catch(e){throw r({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"登录失败"}),e}},n=async e=>{r({type:"SET_LOADING",payload:!0});try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,email:e.email,password:e.password,name:e.realName||e.username})}),s=await t.json();if(!t.ok)throw Error(s.error||"注册失败");let a={USER:l.ATHLETE,ATHLETE:l.ATHLETE,COACH:l.COACH,ADMIN:l.ADMIN},n={id:s.user.id,username:s.user.username,email:s.user.email,name:s.user.name,role:a[s.user.role]||l.ATHLETE,status:o.ACTIVE,createdAt:new Date};try{localStorage.setItem("auth_token",s.token),localStorage.setItem("auth_user",JSON.stringify(n))}catch(e){}r({type:"LOGIN_SUCCESS",payload:n})}catch(e){throw r({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"注册失败"}),e}};(0,h.useEffect)(()=>{try{let e=localStorage.getItem("auth_user");if(e)try{let t=JSON.parse(e);r({type:"LOGIN_SUCCESS",payload:t})}catch(e){localStorage.removeItem("auth_user")}}catch(e){}},[]);let i={...s,login:a,register:n,logout:()=>{try{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token")}catch(e){}r({type:"LOGOUT"})},hasPermission:(e,t)=>{var r,a;return s.user?(null===(r=m[s.user.role][e])||void 0===r?void 0:r.includes(t))||!1:(null===(a=m[l.PUBLIC][e])||void 0===a?void 0:a.includes(t))||!1},clearError:()=>{r({type:"CLEAR_ERROR"})}};return(0,u.jsx)(g.Provider,{value:i,children:t})}function f(){let e=(0,h.useContext)(g);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4480:function(e,t,s){"use strict";s.r(t),s.d(t,{brandPartners:function(){return a},commonPartners:function(){return r},getAllPartners:function(){return o},getPartnersBySport:function(){return l},partnerTypeLabels:function(){return c},resortPartners:function(){return n},sportPartnersMap:function(){return i}});let r={csa:{id:"csa",name:"中国滑雪协会",nameEn:"Chinese Ski Association",logo:"/logos/csa.jpg",url:"https://www.sport.gov.cn/dyzx/",type:"organizer"},huati:{id:"huati",name:"华体冰雪",nameEn:"Huati Ice & Snow",logo:"/logos/huati-vertical.png",url:"http://www.cnsgroup.cn/",type:"host"}},a={liski:{id:"liski",name:"Liski",nameEn:"Liski Sport Equipment",logo:"/logos/liski.png",url:"https://www.liski.it/",type:"brand"},taigeling:{id:"taigeling",name:"泰格岭",nameEn:"Taigeling",logo:"/logos/taigeling.png",type:"brand"}},n={rexueqiji:{id:"rexueqiji",name:"热雪奇迹",nameEn:"Bonski",logo:"/logos/rexueqiji.png",url:"https://www.bonski.com.cn/",type:"resort"},songhuahu:{id:"songhuahu",name:"松花湖度假区",nameEn:"Lake Songhua Resort",logo:"/logos/songhuahu.jpg",url:"https://www.lakesonghua.com/",type:"resort"},xueruyi:{id:"xueruyi",name:"雪如意滑雪场",nameEn:"National Ski Jumping Center",logo:"/logos/xueruyi.png",type:"resort"},fulong:{id:"fulong",name:"富龙滑雪场",nameEn:"Fulong Ski Resort",logo:"/logos/fulong.png",type:"resort"}},i={alpine:{organizers:[r.csa],hosts:[r.huati],brands:[a.liski],resorts:[n.rexueqiji,n.songhuahu]},"snowboard-parallel":{organizers:[r.csa],hosts:[r.huati],brands:[a.liski],resorts:[n.xueruyi]},"snowboard-slopestyle":{organizers:[r.csa],hosts:[r.huati],brands:[a.taigeling],resorts:[n.fulong,n.xueruyi]},"freestyle-slopestyle":{organizers:[r.csa],hosts:[r.huati],brands:[a.taigeling],resorts:[n.fulong,n.xueruyi]}};function l(e){return i[e]||{organizers:[r.csa],hosts:[r.huati],brands:[],resorts:[]}}function o(){let e=[],t=new Set;return Object.values(i).forEach(s=>{[...s.organizers,...s.hosts,...s.brands,...s.resorts].forEach(s=>{t.has(s.id)||(t.add(s.id),e.push(s))})}),e}let c={organizer:"主办单位",host:"承办单位",brand:"合作品牌",resort:"合作雪场"}},2778:function(){}},function(e){e.O(0,[2461,2972,7474,3190,2971,2117,1744],function(){return e(e.s=3955)}),_N_E=e.O()}]);