(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9517],{9239:function(e,t,s){Promise.resolve().then(s.bind(s,4732))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,children:x,...u}=s;return(0,r.createElement)("svg",{ref:i,...n,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:"lucide lucide-".concat(a(e)),...u},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...(Array.isArray(x)?x:[x])||[]])});return s.displayName="".concat(e),s}},4401:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},2252:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8428:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},3327:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},6221:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2735:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3245:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7737:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]])},2023:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},8896:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2973:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var r=s(2972),n=s.n(r)},257:function(e,t,s){"use strict";var r,n;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,r,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var c=[],o=!1,d=-1;function x(){o&&r&&(o=!1,r.length?c=r.concat(c):d=-1,c.length&&u())}function u(){if(!o){var e=l(x);o=!0;for(var t=c.length;t;){for(r=c,c=[];++d<t;)r&&r[d].run();d=-1,t=c.length}r=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new m(e,t)),1!==c.length||o||l(u)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}},i=!0;try{t[e](a,a.exports,r),i=!1}finally{i&&delete s[e]}return a.exports}r.ab="//";var n=r(229);e.exports=n}()},4732:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return L}});var r=s(7437),n=s(2265),a=s(7648),i=s(9065),l=s(7737),c=s(2023),o=s(8428),d=s(2973),x=s(5863),u=s(2252),m=s(740),h=s(2735),p=s(6221),y=s(5805),f=s(1047),v=s(8896),g=s(3327);let j=(0,s(9763).Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var N=s(9474),b=s(4401),w=s(1837),k=s(978);let E=()=>{let e=new Set,t={ALPINE_SKI:new Set,SNOWBOARD_SLOPESTYLE_BIGAIR:new Set,SNOWBOARD_PARALLEL:new Set,FREESTYLE_SLOPESTYLE_BIGAIR:new Set};k.Cm.competitions.forEach(s=>{let r="alpine"===s.sportType?"ALPINE_SKI":"snowboard-slopestyle"===s.sportType?"SNOWBOARD_SLOPESTYLE_BIGAIR":"snowboard-parallel"===s.sportType?"SNOWBOARD_PARALLEL":"FREESTYLE_SLOPESTYLE_BIGAIR";s.events.forEach(s=>{s.athletes.forEach(s=>{var n;e.add(s.name),null===(n=t[r])||void 0===n||n.add(s.name)})})});let s=k.Cm.competitions.filter(e=>"completed"===e.status).length;return{overview:{totalAthletes:e.size,activeAthletes:e.size,totalCompetitions:k.Cm.competitions.length,completedCompetitions:s,upcomingCompetitions:k.Cm.competitions.length-s,currentSeason:"2025-2026"},athletesBySport:Object.entries(t).map(e=>{let[t,s]=e;return{sportType:t,count:s.size}}).filter(e=>e.count>0),recentCompetitions:k.Cm.competitions.slice(0,5).map((e,t)=>({id:"local-".concat(t),name:e.competition,sportType:"alpine"===e.sportType?"ALPINE_SKI":"snowboard-slopestyle"===e.sportType?"SNOWBOARD_SLOPESTYLE_BIGAIR":"snowboard-parallel"===e.sportType?"SNOWBOARD_PARALLEL":"FREESTYLE_SLOPESTYLE_BIGAIR",date:e.date,status:"completed"===e.status?"COMPLETED":"ongoing"===e.status?"ONGOING":"UPCOMING",participantCount:e.events.reduce((e,t)=>e+t.athletes.length,0)})),topAthletes:[]}},S={ALPINE_SKI:{label:"高山滑雪",icon:l.Z,color:"bg-blue-500"},SNOWBOARD_SLOPESTYLE_BIGAIR:{label:"单板坡障/大跳台",icon:c.Z,color:"bg-purple-500"},SNOWBOARD_PARALLEL:{label:"单板平行项目",icon:o.Z,color:"bg-green-500"},FREESTYLE_SLOPESTYLE_BIGAIR:{label:"自由式坡障/大跳台",icon:d.Z,color:"bg-orange-500"}};function L(){let[e,t]=(0,n.useState)("season"),[s,l]=(0,n.useState)("all"),{showToast:c}=(0,i.p)(),[o,d]=(0,n.useState)(null),[k,L]=(0,n.useState)([]),[T,A]=(0,n.useState)(!0),[Z,O]=(0,n.useState)(null),C=(0,n.useCallback)(async()=>{A(!0),O(null);try{let[e,t]=await Promise.all([w.aA.overview(),w.W2.list({pageSize:10})]);e.success&&e.data?d(e.data):d(E()),t.success&&t.data&&L(t.data)}catch(e){d(E()),L([])}finally{A(!1)}},[]);(0,n.useEffect)(()=>{C()},[C]);let R=e=>{let t=["bg-ski-blue","bg-green-500","bg-yellow-500","bg-purple-500","bg-red-500","bg-indigo-500","bg-pink-500","bg-gray-500"];return t[e%t.length]};if(T)return(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,r.jsx)(x.Z,{className:"w-8 h-8 text-ski-blue animate-spin mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"加载统计数据中..."})]})});if(Z||!o)return(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,r.jsx)(u.Z,{className:"w-12 h-12 text-red-500 mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:Z||"获取数据失败"}),(0,r.jsx)("button",{onClick:C,className:"px-4 py-2 bg-ski-blue text-white rounded-lg hover:bg-primary-700 transition-colors",children:"重新加载"})]})});o.athletesBySport.reduce((e,t)=>(e[t.sportType]=t.count,e),{});let M=o.athletesBySport.reduce((e,t)=>e+t.count,0);return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative",children:[(0,r.jsxs)("div",{className:"text-center mb-8 relative z-10",children:[(0,r.jsx)("h1",{className:"section-title",children:"竞赛统计"}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"全面的竞赛数据分析和统计报告"})]}),(0,r.jsx)("div",{className:"card mb-8 relative z-10",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"统计范围:"})]}),(0,r.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ski-blue",children:[(0,r.jsx)("option",{value:"season",children:"本赛季"}),(0,r.jsx)("option",{value:"year",children:"本年度"}),(0,r.jsx)("option",{value:"all",children:"全部"})]}),(0,r.jsxs)("select",{value:s,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ski-blue",children:[(0,r.jsx)("option",{value:"all",children:"全部项目"}),(0,r.jsx)("option",{value:"ALPINE_SKI",children:"高山滑雪"}),(0,r.jsx)("option",{value:"SNOWBOARD_SLOPESTYLE_BIGAIR",children:"单板坡障/大跳台"}),(0,r.jsx)("option",{value:"SNOWBOARD_PARALLEL",children:"单板平行项目"}),(0,r.jsx)("option",{value:"FREESTYLE_SLOPESTYLE_BIGAIR",children:"自由式坡障/大跳台"})]}),(0,r.jsxs)("div",{className:"flex space-x-2 ml-auto",children:[(0,r.jsxs)("button",{className:"btn-secondary flex items-center",onClick:()=>{if(!o){c("没有可导出的数据","warning");return}let e=new Blob(["\uFEFF"+[["指标","数值"],["总运动员数",o.overview.totalAthletes.toString()],["活跃运动员",o.overview.activeAthletes.toString()],["总比赛数",o.overview.totalCompetitions.toString()],["已完成比赛",o.overview.completedCompetitions.toString()],["即将举办",o.overview.upcomingCompetitions.toString()],["当前赛季",o.overview.currentSeason]].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="竞赛统计_".concat(new Date().toISOString().split("T")[0],".csv"),t.click(),URL.revokeObjectURL(t.href),c("统计数据导出成功！","success")},children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"导出报告"]}),(0,r.jsxs)("button",{className:"btn-primary flex items-center",onClick:()=>{c("详细分析报告生成中...","info")},children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"详细分析"]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 relative z-10",children:[(0,r.jsxs)("div",{className:"card text-center",children:[(0,r.jsx)(y.Z,{className:"h-8 w-8 text-ski-blue mx-auto mb-2"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-ski-navy",children:o.overview.totalAthletes}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"注册运动员"}),(0,r.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["活跃 ",o.overview.activeAthletes," 人"]})]}),(0,r.jsxs)("div",{className:"card text-center",children:[(0,r.jsx)(f.Z,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-ski-navy",children:o.overview.totalCompetitions}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"赛事总数"}),(0,r.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["已完成 ",o.overview.completedCompetitions," 场"]})]}),(0,r.jsxs)("div",{className:"card text-center",children:[(0,r.jsx)(v.Z,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-ski-navy",children:o.overview.upcomingCompetitions}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"即将举办"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"场赛事"})]}),(0,r.jsxs)("div",{className:"card text-center",children:[(0,r.jsx)(g.Z,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-ski-navy",children:o.overview.currentSeason}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"当前赛季"}),(0,r.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"赛季进行中"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8 relative z-10",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsxs)("h3",{className:"text-xl font-bold text-ski-navy flex items-center",children:[(0,r.jsx)(j,{className:"h-6 w-6 mr-2"}),"运动员项目分布"]})}),(0,r.jsx)("div",{className:"space-y-4",children:o.athletesBySport.map((e,t)=>{let s=S[e.sportType],n=M>0?e.count/M*100:0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(null==s?void 0:s.label)||e.sportType}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.count," 人"]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",n.toFixed(1),"%)"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat((null==s?void 0:s.color)||R(t)),style:{width:"".concat(n,"%")}})})]},e.sportType)})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-ski-navy flex items-center",children:[(0,r.jsx)(N.Z,{className:"h-6 w-6 mr-2"}),"最近赛事"]}),(0,r.jsx)(a.default,{href:"/competitions",className:"text-sm text-ski-blue hover:underline",children:"查看全部"})]}),(0,r.jsx)("div",{className:"space-y-4",children:o.recentCompetitions.length>0?o.recentCompetitions.slice(0,5).map(e=>{let t=S[e.sportType];return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[(null==t?void 0:t.label)||e.sportType," • ",e.date]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("COMPLETED"===e.status?"bg-green-100 text-green-700":"ONGOING"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:"COMPLETED"===e.status?"已完成":"ONGOING"===e.status?"进行中":"即将开始"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.participantCount," 人参赛"]})]})]},e.id)}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无赛事数据"})})]})]}),(0,r.jsxs)("div",{className:"card relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-ski-navy flex items-center",children:[(0,r.jsx)(N.Z,{className:"h-6 w-6 mr-2"}),"积分排行榜"]}),(0,r.jsx)(a.default,{href:"/points/rankings",className:"text-sm text-ski-blue hover:underline",children:"查看完整排名"})]}),k.length>0?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"排名"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"运动员"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"项目"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"省份/俱乐部"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"积分"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"参赛次数"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((e,t)=>{let s=S[e.sportType];return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ".concat(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-500":"bg-gray-300"),children:e.rank})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)(a.default,{href:"/athletes/".concat(e.athleteId),className:"text-sm font-medium text-gray-900 hover:text-ski-blue",children:e.athleteName})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm text-gray-600",children:(null==s?void 0:s.label)||e.sportType})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm text-gray-600",children:e.province||e.club||"-"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-ski-blue",children:e.totalPoints.toFixed(2)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.competitionCount," 次"]})})]},e.athleteId)})})]})}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无排名数据"})]}),o.topAthletes&&o.topAthletes.length>0&&(0,r.jsxs)("div",{className:"card mt-8 relative z-10",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsxs)("h3",{className:"text-xl font-bold text-ski-navy flex items-center",children:[(0,r.jsx)(g.Z,{className:"h-6 w-6 mr-2"}),"各项目顶尖选手"]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.topAthletes.map((e,t)=>{let s=S[e.sportType];return(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:[(null==s?void 0:s.label)||e.sportType,e.discipline&&" - ".concat(e.discipline)]}),(0,r.jsx)(a.default,{href:"/athletes/".concat(e.athlete.id),className:"font-medium text-gray-900 hover:text-ski-blue block mb-1",children:e.athlete.name}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.athlete.province||"-"}),(0,r.jsxs)("div",{className:"text-lg font-bold text-ski-blue mt-2",children:[e.totalPoints.toFixed(2)," 分"]})]},t)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 relative z-10",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-4 flex items-center",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"数据洞察"]}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,r.jsxs)("li",{children:["• 共有 ",o.overview.totalAthletes," 名注册运动员"]}),(0,r.jsxs)("li",{children:["• 本赛季已举办 ",o.overview.completedCompetitions," 场比赛"]}),(0,r.jsxs)("li",{children:["• 即将举办 ",o.overview.upcomingCompetitions," 场比赛"]}),(0,r.jsxs)("li",{children:["• 活跃运动员占比 ",(o.overview.activeAthletes/o.overview.totalAthletes*100||0).toFixed(1),"%"]}),(0,r.jsxs)("li",{children:["• 当前赛季：",o.overview.currentSeason]})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-ski-navy mb-4",children:"发展建议"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,r.jsx)("li",{children:"• 加强青少年选手培养，扩大后备人才"}),(0,r.jsx)("li",{children:"• 增加各地区赛事覆盖，提高参与度"}),(0,r.jsx)("li",{children:"• 完善积分体系，激励运动员参赛"}),(0,r.jsx)("li",{children:"• 优化赛事组织，提升比赛质量"}),(0,r.jsx)("li",{children:"• 加强数据分析，指导科学训练"})]})]})]})]})}},9065:function(e,t,s){"use strict";s.d(t,{V:function(){return u},p:function(){return x}});var r=s(7437),n=s(2265),a=s(5302),i=s(2252),l=s(3639),c=s(3245),o=s(2489);let d=(0,n.createContext)(void 0);function x(){let e=(0,n.useContext)(d);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function u(e){let{children:t}=e,[s,a]=(0,n.useState)([]),i=(0,n.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),l=(0,n.useRef)(new Map),c=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,r="toast-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),n={id:r,message:e,type:t,duration:s};if(a(e=>[...e,n]),s>0){let e=setTimeout(()=>{i(r),l.current.delete(r)},s);l.current.set(r,e)}},[i]);return(0,n.useEffect)(()=>{let e=l.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear()}},[]),(0,r.jsxs)(d.Provider,{value:{showToast:c,hideToast:i},children:[t,(0,r.jsx)(m,{toasts:s,onClose:i})]})}function m(e){let{toasts:t,onClose:s}=e;return 0===t.length?null:(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(e=>(0,r.jsx)(h,{toast:e,onClose:s},e.id))})}function h(e){let{toast:t,onClose:s}=e,n={success:(0,r.jsx)(a.Z,{className:"w-5 h-5 text-green-500"}),error:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-red-500"}),warning:(0,r.jsx)(l.Z,{className:"w-5 h-5 text-yellow-500"}),info:(0,r.jsx)(c.Z,{className:"w-5 h-5 text-blue-500"})};return(0,r.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-lg border shadow-lg animate-slide-in ".concat({success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",warning:"bg-yellow-50 border-yellow-200",info:"bg-blue-50 border-blue-200"}[t.type]),role:"alert",children:[n[t.type],(0,r.jsx)("p",{className:"flex-1 text-sm text-gray-700 whitespace-pre-line",children:t.message}),(0,r.jsx)("button",{onClick:()=>s(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})})]})}},1837:function(e,t,s){"use strict";s.d(t,{MH:function(){return l},NU:function(){return i},W2:function(){return c},aA:function(){return o}});let r=s(257).env.NEXT_PUBLIC_API_URL||"";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(r).concat(e),n={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(s,n),t=await e.json();if(!e.ok)return{success:!1,error:t.error||{code:"REQUEST_ERROR",message:"请求失败"}};return t}catch(e){return{success:!1,error:{code:"NETWORK_ERROR",message:"网络错误，请检查网络连接"}}}}function a(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&""!==r&&t.append(s,String(r))});let s=t.toString();return s?"?".concat(s):""}let i={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("/api/athletes".concat(a(e)))},get:e=>n("/api/athletes/".concat(e)),create:e=>n("/api/athletes",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>n("/api/athletes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>n("/api/athletes/".concat(e),{method:"DELETE"}),getPoints:e=>n("/api/athletes/".concat(e,"/points"))},l={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("/api/competitions".concat(a(e)))},get:e=>n("/api/competitions/".concat(e)),create:e=>n("/api/competitions",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>n("/api/competitions/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>n("/api/competitions/".concat(e),{method:"DELETE"}),getResults:e=>n("/api/competitions/".concat(e,"/results")),addResult:(e,t)=>n("/api/competitions/".concat(e,"/results"),{method:"POST",body:JSON.stringify(t)})},c={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("/api/rankings".concat(a(e)))}},o={overview:()=>n("/api/stats/overview")}}},function(e){e.O(0,[2972,978,2971,2117,1744],function(){return e(e.s=9239)}),_N_E=e.O()}]);