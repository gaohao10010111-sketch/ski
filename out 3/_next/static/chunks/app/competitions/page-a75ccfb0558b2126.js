(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3990],{6602:function(e,t,s){Promise.resolve().then(s.bind(s,103))},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,t)=>{let s=(0,n.forwardRef)((s,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...m}=s;return(0,n.createElement)("svg",{ref:l,...r,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:"lucide lucide-".concat(a(e)),...m},[...t.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...(Array.isArray(u)?u:[u])||[]])});return s.displayName="".concat(e),s}},2252:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3327:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},6211:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},3245:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7737:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},4586:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var n=s(2972),r=s.n(n)},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},257:function(e,t,s){"use strict";var n,r;e.exports=(null==(n=s.g.process)?void 0:n.env)&&"object"==typeof(null==(r=s.g.process)?void 0:r.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,n,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}}();var o=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?o=n.concat(o):d=-1,o.length&&m())}function m(){if(!c){var e=i(u);c=!0;for(var t=o.length;t;){for(n=o,o=[];++d<t;)n&&n[d].run();d=-1,t=o.length}n=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new x(e,t)),1!==o.length||c||i(m)},x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={exports:{}},l=!0;try{t[e](a,a.exports,n),l=!1}finally{l&&delete s[e]}return a.exports}n.ab="//";var r=n(229);e.exports=r}()},103:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var n=s(7437),r=s(2265),a=s(4007),l=s(6211),i=s(6595),o=s(3774),c=s(4586),d=s(7737),u=s(1047),m=s(5805),x=s(9474),h=s(1723),p=s(740),f=s(3247),y=s(5863),g=s(2252),v=s(2208),b=s(3327),N=s(9065),j=s(7648),w=s(9376),k=s(1837),E=s(978);let C=E.Cm.competitions.map((e,t)=>({id:"local-".concat(t),name:e.competition,sportType:"alpine"===e.sportType?"ALPINE_SKI":"snowboard-slopestyle"===e.sportType?"SNOWBOARD_SLOPESTYLE_BIGAIR":"snowboard-parallel"===e.sportType?"SNOWBOARD_PARALLEL":"FREESTYLE_SLOPESTYLE_BIGAIR",discipline:null,location:e.location,venue:null,startDate:e.date,endDate:e.endDate,format:"U系列",status:"completed"===e.status?"COMPLETED":"ongoing"===e.status?"ONGOING":"UPCOMING",participantCount:e.events.reduce((e,t)=>e+t.athletes.length,0),organizer:"中国滑雪协会",raceLevel:"A",pointsTier:"TIER_360"})),Z={ALPINE_SKI:"高山滑雪",SNOWBOARD_SLOPESTYLE_BIGAIR:"单板坡障/大跳台",SNOWBOARD_PARALLEL:"单板平行项目",FREESTYLE_SLOPESTYLE_BIGAIR:"自由式坡障/大跳台"},T={UPCOMING:{label:"即将开始",color:"bg-blue-100 text-blue-800"},ONGOING:{label:"进行中",color:"bg-green-100 text-green-800"},COMPLETED:{label:"已结束",color:"bg-gray-100 text-gray-800"},CANCELLED:{label:"已取消",color:"bg-red-100 text-red-800"}},L={A:{label:"A级赛事",color:"text-red-600",icon:l.Z},B:{label:"B级赛事",color:"text-blue-600",icon:i.Z},C:{label:"C级赛事",color:"text-green-600",icon:o.Z}},S={TIER_360:{label:"360分档",color:"text-red-600"},TIER_240:{label:"240分档",color:"text-blue-600"},TIER_120:{label:"120分档",color:"text-green-600"}},O={snow:{icon:c.Z,color:"text-blue-500"},clear:{icon:i.Z,color:"text-yellow-500"},cloudy:{icon:d.Z,color:"text-gray-500"}};function A(){var e,t,s,l;let[i,c]=(0,r.useState)("all"),[d,A]=(0,r.useState)("all"),[P,R]=(0,r.useState)(""),[M,I]=(0,r.useState)(!0),[_,D]=(0,r.useState)(null),[G,z]=(0,r.useState)([]),[B,U]=(0,r.useState)(null),[q,W]=(0,r.useState)(1),[H]=(0,r.useState)(10),[Y,V]=(0,r.useState)(0),F=(0,w.useRouter)(),{showToast:J}=(0,N.p)(),K=(0,r.useCallback)(async()=>{I(!0),D(null);try{let t=await k.MH.list({page:q,pageSize:H,sportType:"all"!==d?d:void 0,status:"all"!==i?i:void 0});if(t.success&&t.data&&t.data.length>0){var e;let s=t.data;if(P){let e=P.toLowerCase();s=s.filter(t=>t.name.toLowerCase().includes(e)||t.location.toLowerCase().includes(e))}z(s),V((null===(e=t.meta)||void 0===e?void 0:e.total)||s.length)}else{let e=C;if("all"!==d&&(e=e.filter(e=>e.sportType===d)),"all"!==i&&(e=e.filter(e=>e.status===i)),P){let t=P.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.location.toLowerCase().includes(t))}z(e),V(e.length)}}catch(t){let e=C;if("all"!==d&&(e=e.filter(e=>e.sportType===d)),"all"!==i&&(e=e.filter(e=>e.status===i)),P){let t=P.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.location.toLowerCase().includes(t))}z(e),V(e.length)}finally{I(!1)}},[q,H,d,i,P]),X={totalCompetitions:C.length,totalAthletes:(()=>{let e=new Set;return E.Cm.competitions.forEach(t=>{t.events.forEach(t=>{t.athletes.forEach(t=>e.add(t.name))})}),e.size})(),completedCompetitions:C.filter(e=>"COMPLETED"===e.status).length,upcomingCompetitions:C.filter(e=>"UPCOMING"===e.status).length},$=(0,r.useCallback)(async()=>{try{let e=await k.aA.overview();e.success&&e.data&&U(e.data)}catch(e){}},[]);(0,r.useEffect)(()=>{K(),$()},[K,$]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{W(1)},300);return()=>clearTimeout(e)},[P,i,d]);let Q=e=>{F.push("/results-announcement?competition=".concat(encodeURIComponent(e.name),"&id=").concat(e.id))},ee=e=>["snow","clear","cloudy"][e%3],et=Math.ceil(Y/H);return(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative",children:[(0,n.jsxs)("div",{className:"text-center mb-8 relative z-10",children:[(0,n.jsx)("h1",{className:"section-title",children:"竞赛管理"}),(0,n.jsx)("p",{className:"text-gray-600 text-lg",children:"高山滑雪竞赛组织、管理和结果统计的专业平台"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 mb-6 md:mb-8 relative z-10",children:[(0,n.jsxs)("div",{className:"card text-center p-3 md:p-4",children:[(0,n.jsx)(u.Z,{className:"h-6 w-6 md:h-8 md:w-8 text-ski-blue mx-auto mb-1 md:mb-2"}),(0,n.jsx)("div",{className:"text-xl md:text-2xl font-bold text-ski-navy",children:null!==(e=null==B?void 0:B.overview.totalCompetitions)&&void 0!==e?e:X.totalCompetitions}),(0,n.jsx)("div",{className:"text-xs md:text-sm text-gray-600",children:"本季比赛"})]}),(0,n.jsxs)("div",{className:"card text-center p-3 md:p-4",children:[(0,n.jsx)(m.Z,{className:"h-6 w-6 md:h-8 md:w-8 text-green-600 mx-auto mb-1 md:mb-2"}),(0,n.jsx)("div",{className:"text-xl md:text-2xl font-bold text-ski-navy",children:null!==(t=null==B?void 0:B.overview.totalAthletes)&&void 0!==t?t:X.totalAthletes}),(0,n.jsx)("div",{className:"text-xs md:text-sm text-gray-600",children:"注册运动员"})]}),(0,n.jsxs)("div",{className:"card text-center p-3 md:p-4",children:[(0,n.jsx)(x.Z,{className:"h-6 w-6 md:h-8 md:w-8 text-yellow-600 mx-auto mb-1 md:mb-2"}),(0,n.jsx)("div",{className:"text-xl md:text-2xl font-bold text-ski-navy",children:null!==(s=null==B?void 0:B.overview.completedCompetitions)&&void 0!==s?s:X.completedCompetitions}),(0,n.jsx)("div",{className:"text-xs md:text-sm text-gray-600",children:"已完赛事"})]}),(0,n.jsxs)("div",{className:"card text-center p-3 md:p-4",children:[(0,n.jsx)(h.Z,{className:"h-6 w-6 md:h-8 md:w-8 text-purple-600 mx-auto mb-1 md:mb-2"}),(0,n.jsx)("div",{className:"text-xl md:text-2xl font-bold text-ski-navy",children:null!==(l=null==B?void 0:B.overview.upcomingCompetitions)&&void 0!==l?l:X.upcomingCompetitions}),(0,n.jsx)("div",{className:"text-xs md:text-sm text-gray-600",children:"即将开始"})]})]}),(0,n.jsx)("div",{className:"sticky top-16 z-40 bg-white rounded-lg shadow-md p-3 md:p-6 mb-4 md:mb-8 border border-gray-200",children:(0,n.jsxs)("div",{className:"flex flex-col gap-3 md:gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between md:hidden",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"筛选"})]}),(0,n.jsxs)("span",{className:"text-xs text-gray-600",children:["找到 ",(0,n.jsx)("span",{className:"text-ski-blue font-bold",children:Y})," 场比赛"]})]}),(0,n.jsxs)("div",{className:"hidden md:flex items-center space-x-2",children:[(0,n.jsx)(p.Z,{className:"h-5 w-5 text-gray-500"}),(0,n.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"筛选条件:"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:flex gap-2 md:gap-4",children:[(0,n.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"px-2 md:px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ski-blue transition-all",children:[(0,n.jsx)("option",{value:"all",children:"全部状态"}),(0,n.jsx)("option",{value:"UPCOMING",children:"即将开始"}),(0,n.jsx)("option",{value:"ONGOING",children:"进行中"}),(0,n.jsx)("option",{value:"COMPLETED",children:"已结束"}),(0,n.jsx)("option",{value:"CANCELLED",children:"已取消"})]}),(0,n.jsxs)("select",{value:d,onChange:e=>A(e.target.value),className:"px-2 md:px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ski-blue transition-all",children:[(0,n.jsx)("option",{value:"all",children:"全部项目"}),(0,n.jsx)("option",{value:"ALPINE_SKI",children:"高山滑雪"}),(0,n.jsx)("option",{value:"FREESTYLE_SLOPESTYLE_BIGAIR",children:"自由式坡障/大跳台"}),(0,n.jsx)("option",{value:"SNOWBOARD_SLOPESTYLE_BIGAIR",children:"单板坡障/大跳台"}),(0,n.jsx)("option",{value:"SNOWBOARD_PARALLEL",children:"单板平行项目"})]})]}),(0,n.jsxs)("div",{className:"relative w-full md:max-w-md",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,n.jsx)("input",{type:"text",placeholder:"搜索比赛名称或地点...",value:P,onChange:e=>R(e.target.value),className:"w-full pl-9 md:pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ski-blue transition-all"})]}),(0,n.jsx)("div",{className:"hidden md:flex items-center",children:(0,n.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:["找到 ",(0,n.jsx)("span",{className:"text-ski-blue font-bold",children:Y})," 场比赛"]})})]})}),M&&(0,n.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,n.jsx)(y.Z,{className:"h-8 w-8 animate-spin text-ski-blue"}),(0,n.jsx)("span",{className:"ml-2 text-gray-600",children:"加载中..."})]}),_&&!M&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,n.jsx)(g.Z,{className:"h-12 w-12 text-red-500 mb-4"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:_}),(0,n.jsx)("button",{onClick:K,className:"bg-ski-blue text-white px-4 py-2 rounded-md hover:bg-ski-blue/90",children:"重试"})]}),!M&&!_&&0===G.length&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,n.jsx)(u.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"暂无比赛数据"})]}),!M&&!_&&G.length>0&&(0,n.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 relative z-10",children:G.map((e,t)=>{var s,r;let l=T[e.status]||{label:e.status,color:"bg-gray-100 text-gray-800"},i=L[e.raceLevel||""]||{label:(null===(s=S[e.pointsTier||""])||void 0===s?void 0:s.label)||"普通赛事",color:(null===(r=S[e.pointsTier||""])||void 0===r?void 0:r.color)||"text-gray-600",icon:x.Z},c=ee(t),d=O[c].icon,p=O[c].color;return(0,n.jsxs)("div",{className:"card p-3 md:p-4 hover:shadow-lg transition-shadow duration-200",children:[(0,n.jsxs)("div",{className:"relative h-36 md:h-48 rounded-lg overflow-hidden mb-3 md:mb-4 bg-gradient-to-br from-ski-blue to-ski-navy",children:[(0,n.jsx)("img",{src:(0,a.al)("/images/freestyle-skiing.jpg"),alt:e.name,className:"w-full h-full object-cover opacity-80"}),(0,n.jsx)("div",{className:"absolute top-2 md:top-3 left-2 md:left-3",children:(0,n.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(l.color),children:l.label})}),(0,n.jsx)("div",{className:"absolute top-2 md:top-3 right-2 md:right-3",children:(0,n.jsx)(d,{className:"h-4 w-4 md:h-5 md:w-5 ".concat(p)})}),(0,n.jsx)("div",{className:"absolute bottom-2 md:bottom-3 left-2 md:left-3 right-2 md:right-3",children:(0,n.jsxs)("div",{className:"bg-black/50 backdrop-blur-sm rounded-lg p-2 text-white",children:[(0,n.jsx)("h3",{className:"font-bold text-sm md:text-lg line-clamp-2 md:truncate",children:e.name}),(0,n.jsxs)("div",{className:"flex items-center text-xs md:text-sm opacity-90",children:[(0,n.jsx)(o.Z,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,n.jsx)("span",{className:"truncate",children:e.location})]})]})})]}),(0,n.jsxs)("div",{className:"space-y-2 md:space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1 md:space-x-2",children:[(0,n.jsx)(i.icon,{className:"h-3 w-3 md:h-4 md:w-4 ".concat(i.color)}),(0,n.jsx)("span",{className:"text-xs md:text-sm font-medium ".concat(i.color),children:i.label})]}),(0,n.jsx)("div",{className:"text-xs md:text-sm text-gray-600 truncate max-w-[140px] md:max-w-none",children:Z[e.sportType]||e.sportType})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 md:gap-4 text-xs md:text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(u.Z,{className:"h-3 w-3 md:h-4 md:w-4 text-gray-400 mr-1 md:mr-2 flex-shrink-0"}),(0,n.jsxs)("span",{className:"text-gray-600 truncate",children:[e.startDate,e.startDate!==e.endDate&&(0,n.jsxs)("span",{className:"hidden md:inline",children:[" - ",e.endDate]})]})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(m.Z,{className:"h-3 w-3 md:h-4 md:w-4 text-gray-400 mr-1 md:mr-2 flex-shrink-0"}),(0,n.jsxs)("span",{className:"text-gray-600",children:[e.participantCount||0," 人参赛"]})]})]}),e.organizer&&(0,n.jsxs)("div",{className:"text-xs md:text-sm text-gray-600 hidden md:block",children:[(0,n.jsx)("span",{className:"font-medium",children:"主办方:"})," ",e.organizer]}),(0,n.jsxs)("div",{className:"flex gap-2 pt-2 md:pt-3 border-t border-gray-100",children:[(0,n.jsxs)("button",{onClick:()=>Q(e),className:"flex-1 flex items-center justify-center py-1.5 md:py-2 px-2 md:px-3 text-xs md:text-sm bg-ski-blue text-white rounded-md hover:bg-primary-700 transition-colors",children:[(0,n.jsx)(v.Z,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),"查看详情"]}),"COMPLETED"===e.status&&(0,n.jsxs)(j.default,{href:"/results-announcement?competition=".concat(encodeURIComponent(e.name),"&id=").concat(e.id),className:"flex-1 flex items-center justify-center py-1.5 md:py-2 px-2 md:px-3 text-xs md:text-sm bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors shadow-sm hover:shadow-md",children:[(0,n.jsx)(b.Z,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),"成绩公告"]}),"ONGOING"===e.status&&(0,n.jsxs)("button",{className:"flex-1 flex items-center justify-center py-1.5 md:py-2 px-2 md:px-3 text-xs md:text-sm bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors shadow-sm",title:"比赛进行中，即将发布成绩",children:[(0,n.jsx)(h.Z,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),"比赛中"]}),"UPCOMING"===e.status&&(0,n.jsxs)("button",{className:"flex-1 flex items-center justify-center py-1.5 md:py-2 px-2 md:px-3 text-xs md:text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors shadow-sm",title:"比赛即将开始",children:[(0,n.jsx)(u.Z,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),"即将开始"]}),"CANCELLED"===e.status&&(0,n.jsx)("button",{className:"flex-1 flex items-center justify-center py-1.5 md:py-2 px-2 md:px-3 text-xs md:text-sm bg-red-600 text-white rounded-md cursor-not-allowed",disabled:!0,children:"已取消"})]})]})]},e.id)})}),!M&&!_&&G.length>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200 relative z-10",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-700",children:["显示 ",(0,n.jsx)("span",{className:"font-medium",children:(q-1)*H+1})," 到"," ",(0,n.jsx)("span",{className:"font-medium",children:Math.min(q*H,Y)})," 条，共"," ",(0,n.jsx)("span",{className:"font-medium",children:Y})," 条记录"]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>W(e=>Math.max(1,e-1)),disabled:1===q,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"上一页"}),Array.from({length:Math.min(5,et)},(e,t)=>{let s;return s=et<=5?t+1:q<=3?t+1:q>=et-2?et-4+t:q-2+t,(0,n.jsx)("button",{onClick:()=>W(s),className:"px-3 py-1 text-sm rounded-md ".concat(q===s?"bg-ski-blue text-white":"border border-gray-300 hover:bg-gray-50"),children:s},s)}),(0,n.jsx)("button",{onClick:()=>W(e=>Math.min(et,e+1)),disabled:q>=et,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"下一页"})]})]})]})}},9065:function(e,t,s){"use strict";s.d(t,{V:function(){return m},p:function(){return u}});var n=s(7437),r=s(2265),a=s(5302),l=s(2252),i=s(3639),o=s(3245),c=s(2489);let d=(0,r.createContext)(void 0);function u(){let e=(0,r.useContext)(d);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function m(e){let{children:t}=e,[s,a]=(0,r.useState)([]),l=(0,r.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),i=(0,r.useRef)(new Map),o=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,n="toast-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),r={id:n,message:e,type:t,duration:s};if(a(e=>[...e,r]),s>0){let e=setTimeout(()=>{l(n),i.current.delete(n)},s);i.current.set(n,e)}},[l]);return(0,r.useEffect)(()=>{let e=i.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear()}},[]),(0,n.jsxs)(d.Provider,{value:{showToast:o,hideToast:l},children:[t,(0,n.jsx)(x,{toasts:s,onClose:l})]})}function x(e){let{toasts:t,onClose:s}=e;return 0===t.length?null:(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(e=>(0,n.jsx)(h,{toast:e,onClose:s},e.id))})}function h(e){let{toast:t,onClose:s}=e,r={success:(0,n.jsx)(a.Z,{className:"w-5 h-5 text-green-500"}),error:(0,n.jsx)(l.Z,{className:"w-5 h-5 text-red-500"}),warning:(0,n.jsx)(i.Z,{className:"w-5 h-5 text-yellow-500"}),info:(0,n.jsx)(o.Z,{className:"w-5 h-5 text-blue-500"})};return(0,n.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-lg border shadow-lg animate-slide-in ".concat({success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",warning:"bg-yellow-50 border-yellow-200",info:"bg-blue-50 border-blue-200"}[t.type]),role:"alert",children:[r[t.type],(0,n.jsx)("p",{className:"flex-1 text-sm text-gray-700 whitespace-pre-line",children:t.message}),(0,n.jsx)("button",{onClick:()=>s(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:(0,n.jsx)(c.Z,{className:"w-4 h-4"})})]})}},1837:function(e,t,s){"use strict";s.d(t,{MH:function(){return i},NU:function(){return l},W2:function(){return o},aA:function(){return c}});let n=s(257).env.NEXT_PUBLIC_API_URL||"";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(n).concat(e),r={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(s,r),t=await e.json();if(!e.ok)return{success:!1,error:t.error||{code:"REQUEST_ERROR",message:"请求失败"}};return t}catch(e){return{success:!1,error:{code:"NETWORK_ERROR",message:"网络错误，请检查网络连接"}}}}function a(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[s,n]=e;null!=n&&""!==n&&t.append(s,String(n))});let s=t.toString();return s?"?".concat(s):""}let l={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r("/api/athletes".concat(a(e)))},get:e=>r("/api/athletes/".concat(e)),create:e=>r("/api/athletes",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>r("/api/athletes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>r("/api/athletes/".concat(e),{method:"DELETE"}),getPoints:e=>r("/api/athletes/".concat(e,"/points"))},i={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r("/api/competitions".concat(a(e)))},get:e=>r("/api/competitions/".concat(e)),create:e=>r("/api/competitions",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>r("/api/competitions/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>r("/api/competitions/".concat(e),{method:"DELETE"}),getResults:e=>r("/api/competitions/".concat(e,"/results")),addResult:(e,t)=>r("/api/competitions/".concat(e,"/results"),{method:"POST",body:JSON.stringify(t)})},o={list:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r("/api/rankings".concat(a(e)))}},c={overview:()=>r("/api/stats/overview")}},4007:function(e,t,s){"use strict";s.d(t,{al:function(){return r}});var n=s(257);function r(e){let t=e.startsWith("/")?e:"/".concat(e);return"true"===n.env.GITHUB_PAGES||window.location.pathname.startsWith("/ski/")?"/ski".concat(t):t}}},function(e){e.O(0,[2972,978,2971,2117,1744],function(){return e(e.s=6602)}),_N_E=e.O()}]);