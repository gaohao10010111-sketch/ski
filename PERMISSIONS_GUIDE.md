# 中国滑雪赛事积分系统 - 权限管理文档

## 📋 系统概述

中国滑雪赛事积分系统采用四级权限体系，确保不同身份用户获得相应的功能访问权限。

## 🔐 权限层级设计

### 权限继承关系
```
ADMIN (管理员) - 完全权限
  ↓ 包含所有下级权限
COACH (教练员) - 管理权限
  ↓ 包含所有下级权限
ATHLETE (运动员) - 会员权限
  ↓ 包含所有下级权限
PUBLIC (公众用户) - 基础权限
```

## 👥 用户角色详解

### 1. PUBLIC (公众用户/未登录) - 🚨 DEBUG模式完全开放
**身份特征**: 未注册或未登录用户
**主要权限**: ⭐ **完全权限** (DEBUG模式)

#### ✅ 可访问功能 (完全开放)
- 🏠 **首页**: 平台介绍、动态展示
- 📖 **关于平台**: 系统介绍、功能说明
- 📰 **新闻资讯**: 滑雪赛事新闻、通知 + 编辑权限
- 📞 **联系方式**: 客服联系、意见反馈

#### ✅ 会员功能 (DEBUG开放)
- 👤 **个人档案**: 查看/编辑个人信息
- 🎯 **个人积分**: 查看详细积分记录
- 🔍 **中国积分查询**: 查询自己和他人积分
- 🧮 **积分计算器**: 预估积分工具
- 📈 **积分趋势分析**: 个人积分变化
- 📝 **参赛报名**: 在线报名系统
- 🏁 **赛事信息**: 参赛资格、成绩查看
- 📊 **运动员档案**: 查看运动员数据库

#### ✅ 管理员功能 (DEBUG开放)
- 🛠️ **用户管理**: 用户增删改查、权限分配
- 🧮 **积分计算**: 积分公式配置、批量计算
- 📥 **成绩导入**: 比赛成绩批量导入
- 📢 **成绩发布**: 审核发布比赛结果
- 🏆 **赛事管理**: 完全的赛事管理权限
- ⚙️ **系统配置**: 系统参数、规则配置
- 📊 **数据统计**: 全局数据分析报表

#### ❌ 受限功能
- **无任何限制** (DEBUG模式)

---

### 2. ATHLETE (运动员)
**身份特征**: 注册的滑雪运动员
**主要权限**: 个人数据管理 + 基础会员功能

#### ✅ 新增权限 (在PUBLIC基础上)
- 👤 **个人档案**: 查看/编辑个人信息
- 🎯 **个人积分**: 查看详细积分记录
- 🔍 **中国积分查询**: 查询自己和他人积分
- 🧮 **积分计算器**: 预估积分工具
- 📈 **积分趋势分析**: 个人积分变化
- 📝 **参赛报名**: 在线报名系统
- 🏁 **赛事信息**: 参赛资格、成绩查看
- 📊 **运动员档案**: 查看运动员数据库

#### ❌ 仍然受限
- 成绩导入/发布
- 用户管理
- 系统配置
- 全局数据统计

---

### 3. COACH (教练员)
**身份特征**: 注册的滑雪教练员
**主要权限**: 队员管理 + 运动员所有权限

#### ✅ 新增权限 (在ATHLETE基础上)
- 👥 **队员管理**: 查看指导运动员信息
- 📋 **代理报名**: 为运动员报名参赛
- 📊 **队员数据**: 查看队员训练数据
- 🎯 **团队分析**: 队员积分对比分析
- 📈 **训练统计**: 队员表现统计

#### ❌ 仍然受限
- 积分计算修改
- 系统用户管理
- 全局系统配置
- 成绩发布审核

---

### 4. ADMIN (管理员)
**身份特征**: 系统管理员
**主要权限**: 完全系统管理权限

#### ✅ 完全权限
- 🛠️ **用户管理**: 用户增删改查、权限分配
- 🧮 **积分计算**: 积分公式配置、批量计算
- 📥 **成绩导入**: 比赛成绩批量导入
- 📢 **成绩发布**: 审核发布比赛结果
- 🏆 **赛事管理**: 完全的赛事管理权限
- ⚙️ **系统配置**: 系统参数、规则配置
- 📊 **数据统计**: 全局数据分析报表
- 📝 **内容管理**: 规则文档、新闻编辑
- 🔧 **后台管理**: 系统监控、日志查看

---

## 🧪 调试账号信息

### 测试账号列表

| 角色 | 用户名 | 邮箱 | 密码 | 说明 |
|------|--------|------|------|------|
| 管理员 | admin | admin@ski-china.com | admin123 | 完全权限测试 |
| 教练员 | coach_zhang | coach@ski-china.com | coach123 | 教练权限测试 |
| 运动员 | athlete_li | athlete@ski-china.com | athlete123 | 运动员权限测试 |
| 运动员2 | athlete_wang | wang@ski-china.com | wang123 | 额外运动员账号 |

### 快速登录测试
```bash
# 管理员测试
邮箱: admin@ski-china.com
密码: admin123

# 教练员测试
邮箱: coach@ski-china.com
密码: coach123

# 运动员测试
邮箱: athlete@ski-china.com
密码: athlete123
```

---

## 🌐 系统所有页面URL

### 🏠 公开页面 (所有用户可访问)
```
https://gaohao10010111-sketch.github.io/ski/

├── 首页
│   └── /

├── 平台介绍
│   ├── /about
│   └── /scoring-systems (四大积分系统)

├── 积分系统 (部分公开)
│   ├── /points/rankings (积分排行榜)
│   ├── /points/trends (积分变化趋势)
│   └── /points/fis (中国积分查询)

├── 规则文档 (公开)
│   ├── /rules/points (中国积分规则)
│   ├── /rules/competition (竞赛规则)
│   ├── /rules/technical (技术规范)
│   └── /rules/bilingual (中英对照)

├── 赛事信息 (部分公开)
│   └── /competitions/schedule (赛事日程)

└── 用户系统
    ├── /login (登录)
    ├── /register (注册)
    └── /forgot-password (忘记密码)
```

### 🔒 会员页面 (需要登录)

#### 积分功能
```
├── /points/calculator (积分计算器)
├── /points/my-points (我的积分)
└── /points/analysis (积分分析)
```

#### 个人中心
```
├── /profile (个人档案)
├── /profile/edit (编辑资料)
├── /profile/password (修改密码)
└── /profile/settings (账户设置)
```

#### 赛事功能
```
├── /competitions (比赛列表)
├── /competitions/[id] (比赛详情)
├── /registration (在线报名)
├── /registration/manage (报名管理)
├── /registration/verification (资格审查)
└── /registration/fees (费用管理)
```

#### 运动员管理
```
├── /athletes (运动员档案)
├── /athletes/history (成绩历史)
├── /athletes/rankings (积分排名)
└── /athletes/stats (成绩统计)
```

### 🛠️ 管理员页面 (仅管理员)

#### 后台管理
```
├── /admin (管理后台首页)
├── /admin/dashboard (数据仪表板)
├── /admin/users (用户管理)
├── /admin/permissions (权限管理)
└── /admin/settings (系统配置)
```

#### 数据管理
```
├── /results-import (成绩导入)
├── /results-announcement (成绩发布)
├── /competitions/manage (赛事管理)
├── /competitions/stats (数据分析)
└── /points/calculation (积分计算)
```

#### 内容管理
```
├── /admin/news (新闻管理)
├── /admin/rules (规则管理)
├── /admin/content (内容管理)
└── /admin/feedback (反馈管理)
```

### 🔧 系统页面
```
├── /404 (页面未找到)
├── /403 (权限不足)
├── /500 (服务器错误)
├── /maintenance (系统维护)
├── /terms (服务条款)
├── /privacy (隐私政策)
└── /help (帮助中心)
```

---

## 🎯 权限测试指南

### 测试步骤

1. **未登录状态测试**
   - 访问所有公开页面，确认可正常访问
   - 尝试访问会员页面，应跳转到登录页

2. **运动员权限测试**
   - 使用 `athlete@ski-china.com / athlete123` 登录
   - 测试个人积分查询、报名等功能
   - 确认无法访问管理员功能

3. **教练员权限测试**
   - 使用 `coach@ski-china.com / coach123` 登录
   - 测试队员管理、代理报名功能
   - 确认权限正确继承

4. **管理员权限测试**
   - 使用 `admin@ski-china.com / admin123` 登录
   - 测试所有管理功能
   - 确认完全访问权限

### 权限验证要点

- ✅ **菜单显示**: 根据权限动态显示菜单项
- ✅ **页面访问**: 权限不足时正确拦截
- ✅ **功能操作**: 按钮和操作根据权限启用/禁用
- ✅ **数据查看**: 用户只能看到授权范围内的数据

---

## 📞 技术支持

如遇到权限相关问题，请提供：
1. 使用的测试账号
2. 访问的页面URL
3. 预期权限行为
4. 实际显示结果

**联系方式**:
- 技术支持: tech@ski-china.com
- 系统管理: admin@ski-china.com

---

*最后更新: 2024年12月15日*
*版本: v1.0*