(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7602:function(e,a,t){Promise.resolve().then(t.t.bind(t,8003,23)),Promise.resolve().then(t.t.bind(t,2778,23)),Promise.resolve().then(t.bind(t,2114)),Promise.resolve().then(t.bind(t,2834)),Promise.resolve().then(t.bind(t,4768))},2114:function(e,a,t){"use strict";t.d(a,{ClientProviders:function(){return i}});var s=t(7437),r=t(4362);function i(e){let{children:a}=e;return(0,s.jsx)(r.H,{children:a})}},2834:function(e,a,t){"use strict";t.d(a,{default:function(){return m}});var s=t(7437),r=t(7648),i=t(7737),n=t(9345),c=t(3041),l=t(5135),o=t(4362),E=t(3700),d=t(2265);function m(){let{hasPermission:e,isAuthenticated:a}=(0,o.a)(),[t,m]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{m(!0)},[]),(0,s.jsx)("footer",{className:"bg-ski-navy text-white",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,s.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)(i.Z,{className:"h-8 w-8 text-primary-400"}),(0,s.jsx)("span",{className:"text-xl font-bold",children:"中国滑雪赛事积分系统"})]}),(0,s.jsx)("p",{className:"text-gray-300 text-sm max-w-2xl leading-relaxed",children:"国家体育总局冬季运动管理中心认证的专业滑雪竞赛数据管理平台，涵盖高山滑雪、自由式滑雪、单板滑雪全项目积分计算、成绩管理、赛事组织等一站式解决方案， 致力于推动中国滑雪运动的数字化、标准化发展。"}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,s.jsx)("a",{href:"mailto:contact@alpine-ski-points.com",className:"text-gray-300 hover:text-primary-400 transition-colors",children:(0,s.jsx)(n.Z,{className:"h-5 w-5"})}),(0,s.jsx)("a",{href:"tel:+86-400-123-4567",className:"text-gray-300 hover:text-primary-400 transition-colors",children:(0,s.jsx)(c.Z,{className:"h-5 w-5"})}),(0,s.jsx)("a",{href:"https://github.com/alpine-ski-points",className:"text-gray-300 hover:text-primary-400 transition-colors",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(l.Z,{className:"h-5 w-5"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"积分系统"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm",children:[t&&e(E._z.POINTS_QUERY,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/points/fis",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"中国积分查询"})}):null,t&&e(E._z.POINTS_RANKING,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/points/rankings",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分排行榜"})}):null,t&&e(E._z.POINTS_CALCULATOR,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/points/calculator",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分计算器"})}):null,t&&e(E._z.POINTS_TRENDS,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/points/trends",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分变化趋势"})}):null,t&&e(E._z.RULES_POINTS,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/rules/points",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分规则详解"})}):null,t&&!a&&(0,s.jsx)("li",{className:"pt-2 border-t border-gray-600",children:(0,s.jsx)(r.default,{href:"/login",className:"text-sky-400 hover:text-sky-300 transition-colors text-sm",children:"登录查看更多功能 →"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"赛事管理"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm",children:[t&&e(E._z.COMPETITIONS,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/competitions",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"比赛列表"})}):null,t&&e(E._z.COMPETITIONS_SCHEDULE,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/competitions/schedule",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"赛事日程"})}):null,t&&e(E._z.REGISTRATION,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/registration",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"在线报名"})}):null,t&&e(E._z.RESULTS_IMPORT,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/results-import",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"成绩导入"})}):null,t&&e(E._z.RESULTS_ANNOUNCEMENT,E.aU.READ)?(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"/results-announcement",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"成绩公布"})}):null,t&&!a&&(0,s.jsx)("li",{className:"pt-2 border-t border-gray-600",children:(0,s.jsx)(r.default,{href:"/register",className:"text-sky-400 hover:text-sky-300 transition-colors text-sm",children:"注册参与赛事 →"})})]})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-700 mt-12 pt-8",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-300 mb-4 md:mb-0",children:"\xa9 2024 中国滑雪赛事积分系统. 基于国家体育总局冬季运动管理中心标准开发."}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm",children:[(0,s.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"隐私政策"}),(0,s.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"使用条款"}),(0,s.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"技术规范"}),(0,s.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"联系我们"})]})]})})]})})}},4768:function(e,a,t){"use strict";t.d(a,{default:function(){return p}});var s=t(7437),r=t(7648),i=t(9376),n=t(2265),c=t(7737),l=t(3618),o=t(9474),E=t(5805),d=t(7806),m=t(8736),h=t(875),x=t(9090),U=t(8728),u=t(7692),T=t(2369),N=t(2489),A=t(6840),R=t(4362),_=t(3700);let D=[{name:"首页",href:"/",icon:c.Z,active:!0,resource:_._z.HOME,action:_.aU.READ},{name:"积分系统",href:"/points",icon:l.Z,active:!0,resource:_._z.POINTS_QUERY,action:_.aU.READ,children:[{name:"四大积分系统",href:"/scoring-systems",active:!0,resource:_._z.RULES_POINTS,action:_.aU.READ},{name:"中国积分查询",href:"/points/fis",active:!0,resource:_._z.POINTS_QUERY,action:_.aU.READ},{name:"积分计算器",href:"/points/calculator",active:!0,resource:_._z.POINTS_CALCULATOR,action:_.aU.READ},{name:"积分排行榜",href:"/points/rankings",active:!0,resource:_._z.POINTS_RANKING,action:_.aU.READ},{name:"积分变化趋势",href:"/points/trends",active:!0,resource:_._z.POINTS_TRENDS,action:_.aU.READ}]},{name:"赛事管理",href:"/competitions",icon:o.Z,active:!0,resource:_._z.COMPETITIONS,action:_.aU.READ,children:[{name:"赛事日程",href:"/competitions/schedule",active:!0,resource:_._z.COMPETITIONS_SCHEDULE,action:_.aU.READ},{name:"比赛列表",href:"/competitions",active:!0,resource:_._z.COMPETITIONS,action:_.aU.READ},{name:"成绩导入",href:"/results-import",active:!0,resource:_._z.RESULTS_IMPORT,action:_.aU.READ},{name:"成绩公布",href:"/results-announcement",active:!0,resource:_._z.RESULTS_ANNOUNCEMENT,action:_.aU.READ},{name:"数据分析",href:"/competitions/stats",active:!0,resource:_._z.STATISTICS,action:_.aU.READ}]},{name:"运动员管理",href:"/athletes",icon:E.Z,active:!0,resource:_._z.USER_MANAGEMENT,action:_.aU.READ,children:[{name:"运动员档案",href:"/athletes",active:!0,resource:_._z.USER_MANAGEMENT,action:_.aU.READ},{name:"成绩历史",href:"/athletes/history",active:!0,resource:_._z.POINTS_QUERY,action:_.aU.READ},{name:"成绩统计",href:"/athletes/stats",active:!0,resource:_._z.STATISTICS,action:_.aU.READ}]},{name:"报名系统",href:"/registration",icon:d.Z,active:!0,resource:_._z.REGISTRATION,action:_.aU.READ,children:[{name:"在线报名",href:"/registration",active:!0,resource:_._z.REGISTRATION,action:_.aU.WRITE},{name:"报名管理",href:"/registration/manage",active:!0,resource:_._z.REGISTRATION,action:_.aU.UPDATE},{name:"资格审查",href:"/registration/verification",active:!0,resource:_._z.REGISTRATION,action:_.aU.UPDATE},{name:"费用管理",href:"/registration/fees",active:!0,resource:_._z.REGISTRATION,action:_.aU.UPDATE}]},{name:"规则文档",href:"/rules",icon:m.Z,active:!0,resource:_._z.RULES_POINTS,action:_.aU.READ,children:[{name:"中国积分规则",href:"/rules/points",active:!0,resource:_._z.RULES_POINTS,action:_.aU.READ},{name:"竞赛规则",href:"/rules/competition",active:!0,resource:_._z.RULES_POINTS,action:_.aU.READ},{name:"技术规范",href:"/rules/technical",active:!0,resource:_._z.RULES_POINTS,action:_.aU.READ},{name:"中英对照",href:"/rules/bilingual",active:!0,resource:_._z.RULES_POINTS,action:_.aU.READ}]}];function p(){let[e,a]=(0,n.useState)(!1),[t,l]=(0,n.useState)(null),[o,E]=(0,n.useState)(!1),d=(0,i.usePathname)(),m=(0,i.useRouter)(),{user:_,logout:p,isLoading:I,hasPermission:f,isAuthenticated:S}=(0,R.a)(),O=e=>{l(t===e?null:e)},v=()=>{p(),E(!1),m.push("/")},j=e=>({admin:"管理员",coach:"教练员",athlete:"运动员",user:"用户"})[e]||"用户",g=D.filter(e=>"首页"===e.name||!0).map(e=>({...e,children:e.children?e.children.filter(e=>!S||!e.resource||!e.action||f(e.resource,e.action)).map(e=>({...e,needsAuth:!1})):void 0,needsAuth:!1}));return(0,s.jsxs)("nav",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50",children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)(r.default,{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)(c.Z,{className:"h-8 w-8 text-ski-blue"}),(0,s.jsx)("span",{className:"text-xl font-bold text-ski-navy whitespace-nowrap",children:"中国滑雪赛事积分系统"})]})}),(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-6 flex-1 justify-center ml-8 whitespace-nowrap",children:g.map(e=>(0,s.jsx)("div",{className:"relative",children:e.children?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>O(e.name),className:"flex items-center space-x-1 nav-link whitespace-nowrap ".concat((null==d?void 0:d.startsWith(e.href))||e.children&&e.children.some(e=>d===e.href)?"active":""," ").concat(!e.active||e.needsAuth?"opacity-75":""),disabled:!e.active,children:[(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name}),(0,s.jsx)(h.Z,{className:"h-3 w-3"})]}),t===e.name&&(0,s.jsxs)("div",{className:"dropdown-menu",children:[e.children.map(e=>(0,s.jsx)(r.default,{href:e.href,className:"dropdown-item ".concat(e.active?"text-gray-700 hover:text-ski-blue ".concat(d===e.href?"bg-ski-ice text-ski-blue font-medium":""):"text-gray-400 cursor-not-allowed"),onClick:()=>e.active&&l(null),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e.name}),!e.active&&(0,s.jsx)("span",{className:"badge badge-coming-soon text-xs",children:"即将上线"})]})},e.name)),e.needsAuth&&(0,s.jsx)("div",{className:"border-t border-gray-100 mt-1 pt-1",children:(0,s.jsx)(r.default,{href:"/login",className:"dropdown-item text-sky-500 hover:text-sky-600 text-sm",onClick:()=>l(null),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"h-3 w-3 mr-2"}),(0,s.jsx)("span",{children:"登录解锁功能"})]})})})]})]}):(0,s.jsxs)(r.default,{href:e.href,className:"flex items-center space-x-1 nav-link whitespace-nowrap ".concat(d===e.href||(null==d?void 0:d.startsWith(e.href+"/"))?"active":""," ").concat(e.active?"":"opacity-50 cursor-not-allowed"),children:[(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name}),!e.active&&(0,s.jsx)("span",{className:"badge badge-coming-soon text-xs ml-2",children:"即将上线"})]})},e.name))}),(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-4 whitespace-nowrap",children:I?(0,s.jsx)("div",{className:"animate-pulse bg-gray-200 h-8 w-20 rounded"}):_?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>E(!o),className:"flex items-center space-x-2 text-gray-700 hover:text-ski-blue px-3 py-2 rounded-md text-sm font-medium",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-ski-blue text-white rounded-full flex items-center justify-center text-sm font-semibold",children:_.username.charAt(0).toUpperCase()}),(0,s.jsx)("span",{children:_.username}),(0,s.jsx)(h.Z,{className:"h-4 w-4"})]}),o&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-100 py-1 z-50",children:[(0,s.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:_.username}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:_.email}),(0,s.jsx)("div",{className:"text-xs text-ski-blue",children:j(_.role)})]}),(0,s.jsx)(r.default,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>E(!1),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(U.Z,{className:"h-4 w-4 mr-2"}),"个人设置"]})}),(0,s.jsx)("button",{onClick:v,className:"block w-full px-4 py-2 text-sm text-left text-red-600 hover:bg-red-50",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"退出登录"]})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.default,{href:"/login",className:"flex items-center space-x-1 text-gray-700 hover:text-ski-blue px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"登录"})]}),(0,s.jsxs)(r.default,{href:"/register",className:"flex items-center space-x-1 bg-ski-blue text-white hover:bg-ski-blue/90 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap",children:[(0,s.jsx)(T.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"注册"})]})]})}),(0,s.jsx)("div",{className:"md:hidden flex items-center",children:(0,s.jsx)("button",{onClick:()=>a(!e),className:"text-gray-700 hover:text-ski-blue p-2",children:e?(0,s.jsx)(N.Z,{className:"h-6 w-6"}):(0,s.jsx)(A.Z,{className:"h-6 w-6"})})})]})}),e&&(0,s.jsx)("div",{className:"md:hidden bg-white border-t border-gray-100",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[g.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(r.default,{href:e.needsAuth?"/login":e.href,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium ".concat((null==d?void 0:d.startsWith(e.href))||e.children&&e.children.some(e=>d===e.href)?"text-ski-blue bg-ski-ice":"text-gray-700 hover:text-ski-blue hover:bg-gray-50"," ").concat(!e.active||e.needsAuth?"opacity-75":""),onClick:()=>e.active&&!e.needsAuth&&a(!1),children:[(0,s.jsx)(e.icon,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:e.name}),e.needsAuth&&(0,s.jsx)("span",{className:"text-xs text-sky-500",children:"需要登录"}),!e.active&&(0,s.jsx)("span",{className:"badge badge-coming-soon text-xs",children:"即将上线"})]}),e.children&&(e.active||e.needsAuth)&&(0,s.jsx)("div",{className:"ml-6 space-y-1",children:e.children.map(e=>(0,s.jsx)(r.default,{href:e.href,className:"block px-3 py-2 rounded-md text-sm ".concat(e.active?"text-gray-600 hover:text-ski-blue hover:bg-gray-50 ".concat(d===e.href?"text-ski-blue bg-ski-ice font-medium":""):"text-gray-400 cursor-not-allowed"),onClick:()=>e.active&&a(!1),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e.name}),!e.active&&(0,s.jsx)("span",{className:"badge badge-coming-soon text-xs",children:"即将上线"})]})},e.name))})]},e.name)),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-3 mt-3",children:_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"px-3 py-2 mb-2",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-ski-blue text-white rounded-full flex items-center justify-center text-sm font-semibold",children:_.username.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:_.username}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:j(_.role)})]})]})}),(0,s.jsxs)(r.default,{href:"/profile",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ski-blue hover:bg-gray-50",onClick:()=>a(!1),children:[(0,s.jsx)(U.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"个人设置"})]}),(0,s.jsxs)("button",{onClick:()=>{v(),a(!1)},className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 w-full text-left mt-2",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"退出登录"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.default,{href:"/login",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ski-blue hover:bg-gray-50",onClick:()=>a(!1),children:[(0,s.jsx)(x.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"登录"})]}),(0,s.jsxs)(r.default,{href:"/register",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium bg-ski-blue text-white hover:bg-ski-blue/90 mt-2",onClick:()=>a(!1),children:[(0,s.jsx)(T.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"注册"})]})]})})]})})]})}},4362:function(e,a,t){"use strict";t.d(a,{H:function(){return E},a:function(){return d}});var s=t(7437),r=t(2265),i=t(3700);let n={[i.i4.PUBLIC]:{[i._z.HOME]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.ABOUT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.NEWS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.CONTACT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.PROFILE]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.MY_POINTS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.POINTS_QUERY]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.POINTS_RANKING]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.POINTS_CALCULATOR]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.POINTS_TRENDS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.RULES_POINTS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.COMPETITIONS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.RESULTS_IMPORT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.RESULTS_ANNOUNCEMENT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.ADMIN_DASHBOARD]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.POINTS_CALCULATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.USER_MANAGEMENT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.STATISTICS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.SYSTEM_CONFIG]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE]},[i.i4.ATHLETE]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ],[i._z.COMPETITIONS]:[i.aU.READ],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE]},[i.i4.COACH]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ],[i._z.COMPETITIONS]:[i.aU.READ],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE]},[i.i4.ADMIN]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ,i.aU.UPDATE],[i._z.NEWS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.CONTACT]:[i.aU.READ,i.aU.UPDATE],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ,i.aU.UPDATE],[i._z.COMPETITIONS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE],[i._z.RESULTS_IMPORT]:[i.aU.READ,i.aU.WRITE],[i._z.RESULTS_ANNOUNCEMENT]:[i.aU.READ,i.aU.WRITE],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.ADMIN_DASHBOARD]:[i.aU.READ],[i._z.POINTS_CALCULATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE],[i._z.USER_MANAGEMENT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.STATISTICS]:[i.aU.READ],[i._z.SYSTEM_CONFIG]:[i.aU.READ,i.aU.UPDATE]}},c=(e,a)=>{switch(a.type){case"LOGIN_SUCCESS":return{...e,user:a.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_FAILURE":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:a.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:a.payload};case"CLEAR_ERROR":return{...e,error:null};default:return e}},l={user:null,isAuthenticated:!1,isLoading:!1,error:null},o=(0,r.createContext)(void 0);function E(e){let{children:a}=e,[t,E]=(0,r.useReducer)(c,l),d=async e=>{E({type:"SET_LOADING",payload:!0});try{if(await new Promise(e=>setTimeout(e,1e3)),"admin@ski.com"===e.email&&"admin123"===e.password){let a={id:"1",username:"admin",email:e.email,role:i.i4.ADMIN,status:i.J0.ACTIVE,createdAt:new Date,lastLoginAt:new Date};E({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}else if("athlete@ski.com"===e.email&&"athlete123"===e.password){let a={id:"2",username:"athlete_user",email:e.email,role:i.i4.ATHLETE,status:i.J0.ACTIVE,athleteId:"ATH001",createdAt:new Date,lastLoginAt:new Date};E({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}else if("coach@ski.com"===e.email&&"coach123"===e.password){let a={id:"3",username:"coach_user",email:e.email,role:i.i4.COACH,status:i.J0.ACTIVE,coachId:"COACH001",createdAt:new Date,lastLoginAt:new Date};E({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}else throw Error("邮箱或密码错误，请使用以下测试账号：\n管理员：admin@ski.com / admin123\n运动员：athlete@ski.com / athlete123\n教练：coach@ski.com / coach123")}catch(e){E({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"登录失败"})}},m=async e=>{E({type:"SET_LOADING",payload:!0});try{await new Promise(e=>setTimeout(e,1500));let a={id:Date.now().toString(),username:e.username,email:e.email,role:"athlete"===e.userType?i.i4.ATHLETE:i.i4.COACH,status:i.J0.PENDING,athleteId:"athlete"===e.userType?"ATH".concat(Date.now()):void 0,coachId:"coach"===e.userType?"COACH".concat(Date.now()):void 0,createdAt:new Date};E({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}catch(e){E({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"注册失败"})}};(0,r.useEffect)(()=>{{let e=localStorage.getItem("auth_user");if(e)try{let a=JSON.parse(e);E({type:"LOGIN_SUCCESS",payload:a})}catch(e){localStorage.removeItem("auth_user")}}},[]);let h={...t,login:d,register:m,logout:()=>{localStorage.removeItem("auth_user"),E({type:"LOGOUT"})},hasPermission:(e,a)=>{var s,r;return t.user?(null===(s=n[t.user.role][e])||void 0===s?void 0:s.includes(a))||!1:(null===(r=n[i.i4.PUBLIC][e])||void 0===r?void 0:r.includes(a))||!1},clearError:()=>{E({type:"CLEAR_ERROR"})}};return(0,s.jsx)(o.Provider,{value:h,children:a})}function d(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3700:function(e,a,t){"use strict";var s,r,i,n,c,l,o,E;t.d(a,{J0:function(){return r},_z:function(){return i},aU:function(){return n},i4:function(){return s}}),(c=s||(s={})).PUBLIC="public",c.ATHLETE="athlete",c.COACH="coach",c.ADMIN="admin",(l=r||(r={})).ACTIVE="active",l.INACTIVE="inactive",l.PENDING="pending",(o=i||(i={})).HOME="home",o.ABOUT="about",o.NEWS="news",o.CONTACT="contact",o.PROFILE="profile",o.MY_POINTS="my_points",o.POINTS_QUERY="points_query",o.POINTS_RANKING="points_ranking",o.POINTS_CALCULATOR="points_calculator",o.POINTS_TRENDS="points_trends",o.RULES_POINTS="rules_points",o.COMPETITIONS="competitions",o.COMPETITIONS_SCHEDULE="competitions_schedule",o.RESULTS_IMPORT="results_import",o.RESULTS_ANNOUNCEMENT="results_announcement",o.REGISTRATION="registration",o.EVENTS="events",o.ADMIN_DASHBOARD="admin_dashboard",o.POINTS_CALCULATION="points_calculation",o.USER_MANAGEMENT="user_management",o.STATISTICS="statistics",o.SYSTEM_CONFIG="system_config",(E=n||(n={})).READ="read",E.WRITE="write",E.DELETE="delete",E.UPDATE="update"},2778:function(){}},function(e){e.O(0,[461,972,695,971,117,744],function(){return e(e.s=7602)}),_N_E=e.O()}]);